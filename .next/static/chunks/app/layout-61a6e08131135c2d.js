(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{6798:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,5828,23)),Promise.resolve().then(s.bind(s,8933)),Promise.resolve().then(s.t.bind(s,9998,23))},8933:(e,r,s)=>{"use strict";s.d(r,{default:()=>d});var t=s(5155),n=s(6046),o=s(2115),l=s(8173),i=s.n(l),a=s(9208);let c=()=>{let e=(0,n.useRouter)(),[r,s]=(0,o.useState)(""),[l,c]=(0,o.useState)("");(0,o.useEffect)(()=>{let e=a.A.get("shop"),r=a.A.get("hmac");console.log("Shop Cookie:",e),console.log("HMAC Cookie:",r),e&&fetch("/api/products/link").then(e=>{if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));return e.json()}).then(e=>{(null==e?void 0:e.message)&&"string"==typeof e.message?c(e.message):console.error("Invalid API response format:",e)}).catch(e=>console.error("Fetch error:",e))},[]),(0,o.useEffect)(()=>{{let e=localStorage.getItem("shop");e&&s(e)}},[]);let h=async s=>{if(s.preventDefault(),!r)return e.push("/");try{let s=await fetch("/api/verify-shop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shop:r})});await s.json(),l&&"string"==typeof l?e.push(l):console.error("Redirect URL is invalid:",l)}catch(e){console.error("Error verifying shop:",e)}};return(0,t.jsx)("header",{className:"header",children:(0,t.jsxs)("div",{className:"header-container",children:[(0,t.jsx)("h1",{className:"logo",children:(0,t.jsx)(i(),{href:"/login",children:"Next Shopify App"})}),(0,t.jsx)("nav",{children:(0,t.jsxs)("ul",{className:"nav-links",children:[(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/",children:"Home"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"#",onClick:h,children:"Products"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/about",children:"About"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i(),{href:"/contact",children:"Contact"})})]})})]})})},h=()=>(0,t.jsx)("footer",{className:"footer",children:(0,t.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Next Shopify App. All rights reserved."]})});function d(e){let{children:r}=e,s="/login"===(0,n.usePathname)();return(0,t.jsxs)(t.Fragment,{children:[!s&&(0,t.jsx)(c,{}),(0,t.jsx)("main",{className:"main-content",children:r}),!s&&(0,t.jsx)(h,{})]})}},9998:()=>{}},e=>{var r=r=>e(e.s=r);e.O(0,[615,31,441,517,358],()=>r(6798)),_N_E=e.O()}]);