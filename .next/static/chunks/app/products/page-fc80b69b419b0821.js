(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{6751:(e,t,r)=>{Promise.resolve().then(r.bind(r,2834))},6046:(e,t,r)=>{"use strict";r.r(t);var n=r(6658),o={};for(let e in n)"default"!==e&&(o[e]=()=>n[e]);r.d(t,o)},2834:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(5155),o=r(2115),i=r(6046),c=r(9208);function s(){let[e,t]=(0,o.useState)(null),[r,s]=(0,o.useState)(!0),[a,d]=(0,o.useState)([]),u=(0,i.useRouter)();return((0,o.useEffect)(()=>{(async()=>{let e=c.A.get("shop"),r=new URL(window.location.href).searchParams.get("hmac");if(!e||!r){u.replace("/");return}try{let n=await fetch("/api/verify-shop",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shop:e,hmac:r})});if(!(await n.json()).isValid){t(!1),u.replace("/");return}t(!0);let o=await fetch("/api/products?shop=".concat(e)),i=await o.json();console.log("productsResponse",o),console.log("productsData",i),i.products&&d(i.products)}catch(e){console.error("Error verifying shop or fetching products:",e),t(!1)}finally{s(!1)}})()},[u]),r)?(0,n.jsx)("p",{children:"Loading..."}):!1===e?null:(0,n.jsxs)("div",{className:"products-container",children:[(0,n.jsx)("h1",{children:"Products"}),0===a.length?(0,n.jsx)("p",{children:"No products found."}):(0,n.jsx)("div",{className:"products-grid",children:a.map(e=>{var t,r;return(0,n.jsxs)("div",{className:"product-card",children:[(0,n.jsx)("img",{src:(null===(t=e.image)||void 0===t?void 0:t.src)||"/placeholder.jpg",alt:e.title,className:"product-image"}),(0,n.jsxs)("div",{className:"product-info",children:[(0,n.jsx)("p",{className:"product-title",children:e.title}),(0,n.jsxs)("p",{className:"product-price",children:["â‚¹",(null===(r=e.variants[0])||void 0===r?void 0:r.price)||"N/A"]})]})]},e.id)})})]})}r(6430)},6430:()=>{},9208:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>o});var o=function e(t,r){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=n({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var s in i)i[s]&&(c+="; "+s,!0!==i[s]&&(c+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+c}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var i=r[o].split("="),c=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(n[s]=t.read(c,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){o(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},e=>{var t=t=>e(e.s=t);e.O(0,[471,441,517,358],()=>t(6751)),_N_E=e.O()}]);