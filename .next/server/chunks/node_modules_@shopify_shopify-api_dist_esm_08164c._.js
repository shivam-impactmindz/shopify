module.exports = {

"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "ApiVersion": (()=>ApiVersion),
    "BillingInterval": (()=>BillingInterval),
    "BillingReplacementBehavior": (()=>BillingReplacementBehavior),
    "ClientType": (()=>ClientType),
    "LATEST_API_VERSION": (()=>LATEST_API_VERSION),
    "LIBRARY_NAME": (()=>LIBRARY_NAME),
    "LogSeverity": (()=>LogSeverity),
    "ShopifyHeader": (()=>ShopifyHeader),
    "privacyTopics": (()=>privacyTopics)
});
var LogSeverity;
(function(LogSeverity) {
    LogSeverity[LogSeverity["Error"] = 0] = "Error";
    LogSeverity[LogSeverity["Warning"] = 1] = "Warning";
    LogSeverity[LogSeverity["Info"] = 2] = "Info";
    LogSeverity[LogSeverity["Debug"] = 3] = "Debug";
})(LogSeverity || (LogSeverity = {}));
var ApiVersion;
(function(ApiVersion) {
    ApiVersion["October22"] = "2022-10";
    ApiVersion["January23"] = "2023-01";
    ApiVersion["April23"] = "2023-04";
    ApiVersion["July23"] = "2023-07";
    ApiVersion["October23"] = "2023-10";
    ApiVersion["January24"] = "2024-01";
    ApiVersion["April24"] = "2024-04";
    ApiVersion["July24"] = "2024-07";
    ApiVersion["October24"] = "2024-10";
    ApiVersion["January25"] = "2025-01";
    ApiVersion["Unstable"] = "unstable";
})(ApiVersion || (ApiVersion = {}));
const LIBRARY_NAME = 'Shopify API Library';
const LATEST_API_VERSION = ApiVersion.January25;
/* eslint-disable @shopify/typescript/prefer-pascal-case-enums */ var ShopifyHeader;
(function(ShopifyHeader) {
    ShopifyHeader["AccessToken"] = "X-Shopify-Access-Token";
    ShopifyHeader["ApiVersion"] = "X-Shopify-API-Version";
    ShopifyHeader["Domain"] = "X-Shopify-Shop-Domain";
    ShopifyHeader["Hmac"] = "X-Shopify-Hmac-Sha256";
    ShopifyHeader["Topic"] = "X-Shopify-Topic";
    ShopifyHeader["SubTopic"] = "X-Shopify-Sub-Topic";
    ShopifyHeader["WebhookId"] = "X-Shopify-Webhook-Id";
    ShopifyHeader["StorefrontPrivateToken"] = "Shopify-Storefront-Private-Token";
    ShopifyHeader["StorefrontSDKVariant"] = "X-SDK-Variant";
    ShopifyHeader["StorefrontSDKVersion"] = "X-SDK-Version";
})(ShopifyHeader || (ShopifyHeader = {}));
/* eslint-enable @shopify/typescript/prefer-pascal-case-enums */ var ClientType;
(function(ClientType) {
    ClientType["Rest"] = "rest";
    ClientType["Graphql"] = "graphql";
})(ClientType || (ClientType = {}));
const privacyTopics = [
    'CUSTOMERS_DATA_REQUEST',
    'CUSTOMERS_REDACT',
    'SHOP_REDACT'
];
var BillingInterval;
(function(BillingInterval) {
    BillingInterval["OneTime"] = "ONE_TIME";
    BillingInterval["Every30Days"] = "EVERY_30_DAYS";
    BillingInterval["Annual"] = "ANNUAL";
    BillingInterval["Usage"] = "USAGE";
})(BillingInterval || (BillingInterval = {}));
var BillingReplacementBehavior;
(function(BillingReplacementBehavior) {
    BillingReplacementBehavior["ApplyImmediately"] = "APPLY_IMMEDIATELY";
    BillingReplacementBehavior["ApplyOnNextBillingCycle"] = "APPLY_ON_NEXT_BILLING_CYCLE";
    BillingReplacementBehavior["Standard"] = "STANDARD";
})(BillingReplacementBehavior || (BillingReplacementBehavior = {}));
;
 //# sourceMappingURL=types.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "BillingError": (()=>BillingError),
    "BotActivityDetected": (()=>BotActivityDetected),
    "CookieNotFound": (()=>CookieNotFound),
    "FeatureDeprecatedError": (()=>FeatureDeprecatedError),
    "GraphqlQueryError": (()=>GraphqlQueryError),
    "HttpInternalError": (()=>HttpInternalError),
    "HttpMaxRetriesError": (()=>HttpMaxRetriesError),
    "HttpRequestError": (()=>HttpRequestError),
    "HttpResponseError": (()=>HttpResponseError),
    "HttpRetriableError": (()=>HttpRetriableError),
    "HttpThrottlingError": (()=>HttpThrottlingError),
    "InvalidDeliveryMethodError": (()=>InvalidDeliveryMethodError),
    "InvalidHmacError": (()=>InvalidHmacError),
    "InvalidHostError": (()=>InvalidHostError),
    "InvalidJwtError": (()=>InvalidJwtError),
    "InvalidOAuthError": (()=>InvalidOAuthError),
    "InvalidRequestError": (()=>InvalidRequestError),
    "InvalidSession": (()=>InvalidSession),
    "InvalidShopError": (()=>InvalidShopError),
    "InvalidWebhookError": (()=>InvalidWebhookError),
    "MissingJwtTokenError": (()=>MissingJwtTokenError),
    "MissingRequiredArgument": (()=>MissingRequiredArgument),
    "MissingWebhookCallbackError": (()=>MissingWebhookCallbackError),
    "PrivateAppError": (()=>PrivateAppError),
    "RestResourceError": (()=>RestResourceError),
    "SafeCompareError": (()=>SafeCompareError),
    "SessionStorageError": (()=>SessionStorageError),
    "ShopifyError": (()=>ShopifyError),
    "UnsupportedClientType": (()=>UnsupportedClientType)
});
class ShopifyError extends Error {
    constructor(message){
        super(message);
        Object.setPrototypeOf(this, new.target.prototype);
    }
}
class InvalidHmacError extends ShopifyError {
}
class InvalidShopError extends ShopifyError {
}
class InvalidHostError extends ShopifyError {
}
class InvalidJwtError extends ShopifyError {
}
class MissingJwtTokenError extends ShopifyError {
}
class InvalidDeliveryMethodError extends ShopifyError {
}
class SafeCompareError extends ShopifyError {
}
class PrivateAppError extends ShopifyError {
}
class HttpRequestError extends ShopifyError {
}
class HttpMaxRetriesError extends ShopifyError {
}
class HttpResponseError extends ShopifyError {
    response;
    constructor({ message, code, statusText, body, headers }){
        super(message);
        this.response = {
            code,
            statusText,
            body,
            headers
        };
    }
}
class HttpRetriableError extends HttpResponseError {
}
class HttpInternalError extends HttpRetriableError {
}
class HttpThrottlingError extends HttpRetriableError {
    constructor({ retryAfter, ...params }){
        super(params);
        this.response.retryAfter = retryAfter;
    }
}
class RestResourceError extends ShopifyError {
}
class GraphqlQueryError extends ShopifyError {
    response;
    headers;
    body;
    constructor({ message, response, headers, body }){
        super(message);
        this.response = response;
        this.headers = headers;
        this.body = body;
    }
}
class InvalidOAuthError extends ShopifyError {
}
class BotActivityDetected extends ShopifyError {
}
class CookieNotFound extends ShopifyError {
}
class InvalidSession extends ShopifyError {
}
class InvalidWebhookError extends ShopifyError {
    response;
    constructor({ message, response }){
        super(message);
        this.response = response;
    }
}
class MissingWebhookCallbackError extends InvalidWebhookError {
}
class SessionStorageError extends ShopifyError {
}
class MissingRequiredArgument extends ShopifyError {
}
class UnsupportedClientType extends ShopifyError {
}
class InvalidRequestError extends ShopifyError {
}
class BillingError extends ShopifyError {
    errorData;
    constructor({ message, errorData }){
        super(message);
        this.errorData = errorData;
    }
}
class FeatureDeprecatedError extends ShopifyError {
}
;
 //# sourceMappingURL=error.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/version.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "SHOPIFY_API_LIBRARY_VERSION": (()=>SHOPIFY_API_LIBRARY_VERSION)
});
const SHOPIFY_API_LIBRARY_VERSION = '11.8.1';
;
 //# sourceMappingURL=version.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/log.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "log": (()=>log)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
;
function log(config) {
    return function(severity, message, context = {}) {
        if (severity > config.logger.level) {
            return;
        }
        const prefix = [];
        if (config.logger.timestamps) {
            prefix.push(`${new Date().toISOString().slice(0, -5)}Z`);
        }
        let packageString = context.package || 'shopify-api';
        delete context.package;
        switch(severity){
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Debug:
                packageString = `${packageString}/DEBUG`;
                break;
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Info:
                packageString = `${packageString}/INFO`;
                break;
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Warning:
                packageString = `${packageString}/WARNING`;
                break;
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Error:
                packageString = `${packageString}/ERROR`;
                break;
        }
        prefix.push(packageString);
        const contextParts = [];
        Object.entries(context).forEach(([key, value])=>{
            contextParts.push(`${key}: ${value}`);
        });
        let suffix = '';
        if (contextParts.length > 0) {
            suffix = ` | {${contextParts.join(', ')}}`;
        }
        config.logger.log(severity, `[${prefix.join('] [')}] ${message}${suffix}`);
    };
}
;
 //# sourceMappingURL=log.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "logger": (()=>logger)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$version$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/version.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$log$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/log.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$compare$2d$versions$2f$lib$2f$esm$2f$compare$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/compare-versions/lib/esm/compare.js [app-route] (ecmascript)");
;
;
;
;
;
function logger(config) {
    const logFunction = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$log$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["log"])(config);
    return {
        log: logFunction,
        debug: async (message, context = {})=>logFunction(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Debug, message, context),
        info: async (message, context = {})=>logFunction(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Info, message, context),
        warning: async (message, context = {})=>logFunction(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Warning, message, context),
        error: async (message, context = {})=>logFunction(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Error, message, context),
        deprecated: deprecated(logFunction)
    };
}
function deprecated(logFunction) {
    return function(version, message) {
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$compare$2d$versions$2f$lib$2f$esm$2f$compare$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["compare"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$version$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SHOPIFY_API_LIBRARY_VERSION"], version, '>=')) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["FeatureDeprecatedError"](`Feature was deprecated in version ${version}`);
        }
        return logFunction(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Warning, `[Deprecated | ${version}] ${message}`);
    };
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/rest/load-rest-resources.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "loadRestResources": (()=>loadRestResources)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
;
function loadRestResources({ resources, config, RestClient }) {
    const firstResource = Object.keys(resources)[0];
    if (config.apiVersion !== resources[firstResource].apiVersion) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).warning(`Loading REST resources for API version ${resources[firstResource].apiVersion}, which doesn't match the default ${config.apiVersion}`);
    }
    return Object.fromEntries(Object.entries(resources).map(([name, resource])=>{
        class NewResource extends resource {
        }
        NewResource.setClassProperties({
            Client: RestClient,
            config
        });
        Object.entries(NewResource.hasOne).map(([_attribute, klass])=>{
            klass.setClassProperties({
                Client: RestClient,
                config
            });
        });
        Object.entries(NewResource.hasMany).map(([_attribute, klass])=>{
            klass.setClassProperties({
                Client: RestClient,
                config
            });
        });
        Reflect.defineProperty(NewResource, 'name', {
            value: name
        });
        return [
            name,
            NewResource
        ];
    }));
}
;
 //# sourceMappingURL=load-rest-resources.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/platform/runtime-string.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
// eslint-disable-next-line import/no-mutable-exports
__turbopack_esm__({
    "abstractRuntimeString": (()=>abstractRuntimeString),
    "setAbstractRuntimeString": (()=>setAbstractRuntimeString)
});
let abstractRuntimeString = ()=>{
    throw new Error("Missing adapter implementation for 'abstractRuntimeString' - make sure to import the appropriate adapter for your platform");
};
function setAbstractRuntimeString(func) {
    abstractRuntimeString = func;
}
;
 //# sourceMappingURL=runtime-string.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/future/flags.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "logDisabledFutureFlags": (()=>logDisabledFutureFlags)
});
function logDisabledFutureFlags(config, logger) {
    if (!config._logDisabledFutureFlags) {
        return;
    }
    const logFlag = (flag, message)=>logger.info(`Future flag ${flag} is disabled.\n\n  ${message}\n`);
    if (!config.future?.lineItemBilling) {
        logFlag('lineItemBilling', 'Enable this flag to use the new billing API, that supports multiple line items per plan.');
    }
    if (config.future?.v10_lineItemBilling) {
        logger.deprecated('12.0.0', 'v10_lineItemBilling will become enabled in v11. Use flag lineItemBilling instead');
    }
    if (!config.future?.customerAddressDefaultFix) {
        logFlag('customerAddressDefaultFix', "Enable this flag to change the CustomerAddress classes to expose a 'is_default' property instead of 'default' when fetching data.");
    }
    if (!config.future?.unstable_managedPricingSupport) {
        logFlag('unstable_managedPricingSupport', 'Enable this flag to support managed pricing, so apps can check for payments without needing a billing config. Learn more at https://shopify.dev/docs/apps/launch/billing/managed-pricing');
    }
}
;
 //# sourceMappingURL=flags.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/scopes/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
/**
 * A class that represents a set of access token scopes.
 */ __turbopack_esm__({
    "AuthScopes": (()=>AuthScopes)
});
class AuthScopes {
    static SCOPE_DELIMITER = ',';
    compressedScopes;
    expandedScopes;
    originalScopes;
    constructor(scopes){
        let scopesArray = [];
        if (typeof scopes === 'string') {
            scopesArray = scopes.split(new RegExp(`${AuthScopes.SCOPE_DELIMITER}\\s*`));
        } else if (Array.isArray(scopes)) {
            scopesArray = scopes;
        } else if (scopes) {
            scopesArray = Array.from(scopes.expandedScopes);
        }
        scopesArray = scopesArray.map((scope)=>scope.trim()).filter((scope)=>scope.length);
        const impliedScopes = this.getImpliedScopes(scopesArray);
        const scopeSet = new Set(scopesArray);
        const impliedSet = new Set(impliedScopes);
        this.compressedScopes = new Set([
            ...scopeSet
        ].filter((x)=>!impliedSet.has(x)));
        this.expandedScopes = new Set([
            ...scopeSet,
            ...impliedSet
        ]);
        this.originalScopes = scopeSet;
    }
    /**
     * Checks whether the current set of scopes includes the given one.
     */ has(scope) {
        let other;
        if (scope instanceof AuthScopes) {
            other = scope;
        } else {
            other = new AuthScopes(scope);
        }
        return other.toArray().filter((x)=>!this.expandedScopes.has(x)).length === 0;
    }
    /**
     * Checks whether the current set of scopes equals the given one.
     */ equals(otherScopes) {
        let other;
        if (otherScopes instanceof AuthScopes) {
            other = otherScopes;
        } else {
            other = new AuthScopes(otherScopes);
        }
        return this.compressedScopes.size === other.compressedScopes.size && this.toArray().filter((x)=>!other.has(x)).length === 0;
    }
    /**
     * Returns a comma-separated string with the current set of scopes.
     */ toString() {
        return this.toArray().join(AuthScopes.SCOPE_DELIMITER);
    }
    /**
     * Returns an array with the current set of scopes.
     */ toArray(returnOriginalScopes = false) {
        return returnOriginalScopes ? [
            ...this.originalScopes
        ] : [
            ...this.compressedScopes
        ];
    }
    getImpliedScopes(scopesArray) {
        return scopesArray.reduce((array, current)=>{
            const matches = current.match(/^(unauthenticated_)?write_(.*)$/);
            if (matches) {
                array.push(`${matches[1] ? matches[1] : ''}read_${matches[2]}`);
            }
            return array;
        }, []);
    }
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/config.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "validateConfig": (()=>validateConfig)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$scopes$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/scopes/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
;
;
;
;
function validateConfig(params) {
    const config = {
        apiKey: '',
        apiSecretKey: '',
        hostName: '',
        hostScheme: 'https',
        apiVersion: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LATEST_API_VERSION"],
        isEmbeddedApp: true,
        isCustomStoreApp: false,
        logger: {
            log: defaultLogFunction,
            level: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Info,
            httpRequests: false,
            timestamps: false
        },
        future: {},
        _logDisabledFutureFlags: true
    };
    // Make sure that the essential params actually have content in them
    const mandatory = [
        'apiSecretKey',
        'hostName'
    ];
    if (!('isCustomStoreApp' in params) || !params.isCustomStoreApp) {
        mandatory.push('apiKey');
    }
    if ('isCustomStoreApp' in params && params.isCustomStoreApp) {
        if (!('adminApiAccessToken' in params) || params.adminApiAccessToken?.length === 0) {
            mandatory.push('adminApiAccessToken');
        }
    }
    const missing = [];
    mandatory.forEach((key)=>{
        if (!notEmpty(params[key])) {
            missing.push(key);
        }
    });
    if (missing.length) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyError"](`Cannot initialize Shopify API Library. Missing values for: ${missing.join(', ')}`);
    }
    // Alias the v10_lineItemBilling flag to lineItemBilling because we aren't releasing in v10
    const future = params.future?.v10_lineItemBilling ? {
        lineItemBilling: params.future?.v10_lineItemBilling,
        ...params.future
    } : params.future;
    const { hostScheme, isCustomStoreApp, adminApiAccessToken, userAgentPrefix, logger: logger$1, privateAppStorefrontAccessToken, customShopDomains, billing, ...mandatoryParams } = params;
    let scopes;
    if (params.scopes === undefined) {
        scopes = undefined;
    } else if (params.scopes instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$scopes$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AuthScopes"]) {
        scopes = params.scopes;
    } else {
        scopes = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$scopes$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AuthScopes"](params.scopes);
    }
    Object.assign(config, mandatoryParams, {
        hostName: params.hostName.replace(/\/$/, ''),
        scopes,
        hostScheme: hostScheme ?? config.hostScheme,
        isCustomStoreApp: isCustomStoreApp ?? config.isCustomStoreApp,
        adminApiAccessToken: adminApiAccessToken ?? config.adminApiAccessToken,
        userAgentPrefix: userAgentPrefix ?? config.userAgentPrefix,
        logger: {
            ...config.logger,
            ...logger$1 || {}
        },
        privateAppStorefrontAccessToken: privateAppStorefrontAccessToken ?? config.privateAppStorefrontAccessToken,
        customShopDomains: customShopDomains ?? config.customShopDomains,
        billing: billing ?? config.billing,
        future: future ?? config.future
    });
    if (config.isCustomStoreApp && params.adminApiAccessToken === params.apiSecretKey) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).warning("adminApiAccessToken is set to the same value as apiSecretKey. adminApiAccessToken should be set to the Admin API access token for custom store apps; apiSecretKey should be set to the custom store app's API secret key.");
    }
    return config;
}
function notEmpty(value) {
    if (value == null) {
        return false;
    }
    return typeof value === 'string' || Array.isArray(value) ? value.length > 0 : true;
}
function defaultLogFunction(severity, message) {
    switch(severity){
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Debug:
            console.debug(message);
            break;
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Info:
            console.log(message);
            break;
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Warning:
            console.warn(message);
            break;
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Error:
            console.error(message);
            break;
    }
}
;
 //# sourceMappingURL=config.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
// The mutable export is the whole key to the adapter architecture.
// eslint-disable-next-line import/no-mutable-exports
__turbopack_esm__({
    "crypto": (()=>cryptoVar),
    "setCrypto": (()=>setCrypto)
});
let cryptoVar;
try {
    cryptoVar = crypto;
} catch (_e) {
// This will fail for Node, but we're explicitly calling the below function to set it
}
function setCrypto(crypto1) {
    cryptoVar = crypto1;
}
;
 //# sourceMappingURL=crypto.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "HashFormat": (()=>HashFormat)
});
var HashFormat;
(function(HashFormat) {
    HashFormat["Base64"] = "base64";
    HashFormat["Hex"] = "hex";
})(HashFormat || (HashFormat = {}));
;
 //# sourceMappingURL=types.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "abstractConvertHeaders": (()=>abstractConvertHeaders),
    "abstractConvertIncomingResponse": (()=>abstractConvertIncomingResponse),
    "abstractConvertRequest": (()=>abstractConvertRequest),
    "abstractConvertResponse": (()=>abstractConvertResponse),
    "abstractFetch": (()=>abstractFetch),
    "isOK": (()=>isOK),
    "setAbstractConvertHeadersFunc": (()=>setAbstractConvertHeadersFunc),
    "setAbstractConvertIncomingResponseFunc": (()=>setAbstractConvertIncomingResponseFunc),
    "setAbstractConvertRequestFunc": (()=>setAbstractConvertRequestFunc),
    "setAbstractConvertResponseFunc": (()=>setAbstractConvertResponseFunc),
    "setAbstractFetchFunc": (()=>setAbstractFetchFunc)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
;
;
function isOK(resp) {
    // https://fetch.spec.whatwg.org/#ok-status
    return resp.statusCode >= 200 && resp.statusCode <= 299;
}
// We ignore mutable export linting errors because we explicitly want these abstract functions to be overwritten.
// eslint-disable-next-line import/no-mutable-exports
let abstractFetch = ()=>{
    throw new Error("Missing adapter implementation for 'abstractFetch' - make sure to import the appropriate adapter for your platform");
};
function setAbstractFetchFunc(func) {
    abstractFetch = func;
}
// eslint-disable-next-line import/no-mutable-exports
let abstractConvertRequest = ()=>{
    throw new Error("Missing adapter implementation for 'abstractConvertRequest' - make sure to import the appropriate adapter for your platform");
};
function setAbstractConvertRequestFunc(func) {
    abstractConvertRequest = func;
}
// By default we just return an empty NormalizedResponse because not all adapters will need to convert an incoming response
// eslint-disable-next-line import/no-mutable-exports
let abstractConvertIncomingResponse = ()=>Promise.resolve({});
function setAbstractConvertIncomingResponseFunc(func) {
    abstractConvertIncomingResponse = func;
}
// eslint-disable-next-line import/no-mutable-exports
let abstractConvertResponse = ()=>{
    throw new Error("Missing adapter implementation for 'abstractConvertResponse' - make sure to import the appropriate adapter for your platform");
};
function setAbstractConvertResponseFunc(func) {
    abstractConvertResponse = func;
}
// eslint-disable-next-line import/no-mutable-exports
let abstractConvertHeaders = ()=>{
    throw new Error("Missing adapter implementation for 'abstractConvertHeaders' - make sure to import the appropriate adapter for your platform");
};
function setAbstractConvertHeadersFunc(func) {
    abstractConvertHeaders = func;
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/headers.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
/**
 * Canonicalizes a header name by capitalizing each segment and ensuring consistent hyphenation.
 *
 * @param hdr - The header name to canonicalize.
 * @returns The canonicalized header name.
 */ __turbopack_esm__({
    "addHeader": (()=>addHeader),
    "canonicalizeHeaderName": (()=>canonicalizeHeaderName),
    "canonicalizeHeaders": (()=>canonicalizeHeaders),
    "flatHeaders": (()=>flatHeaders),
    "getHeader": (()=>getHeader),
    "getHeaders": (()=>getHeaders),
    "removeHeader": (()=>removeHeader),
    "setHeader": (()=>setHeader)
});
function canonicalizeHeaderName(hdr) {
    return hdr.replace(/(^|-)(\w+)/g, (_fullMatch, start, letters)=>start + letters.slice(0, 1).toUpperCase() + letters.slice(1).toLowerCase());
}
/**
 * Retrieves all values associated with a canonicalized header name from the headers object.
 *
 * @param headers - The headers object or undefined.
 * @param needle_ - The header name to search for.
 * @returns An array of header values associated with the canonicalized header name.
 */ function getHeaders(headers, needle_) {
    const result = [];
    if (!headers) return result;
    const needle = canonicalizeHeaderName(needle_);
    for (const [key, values] of Object.entries(headers)){
        if (canonicalizeHeaderName(key) !== needle) continue;
        if (Array.isArray(values)) {
            result.push(...values);
        } else {
            result.push(values);
        }
    }
    return result;
}
/**
 * Retrieves the first value associated with a canonicalized header name from the headers object.
 *
 * @param headers - The headers object or undefined.
 * @param needle - The header name to search for.
 * @returns The first value associated with the canonicalized header name, or undefined if not found.
 */ function getHeader(headers, needle) {
    if (!headers) return undefined;
    return getHeaders(headers, needle)?.[0];
}
/**
 * Sets a header to a single value, canonicalizing the header name.
 *
 * @param headers - The headers object.
 * @param key - The header name to set.
 * @param value - The value to assign to the header.
 */ function setHeader(headers, key, value) {
    canonicalizeHeaders(headers);
    headers[canonicalizeHeaderName(key)] = [
        value
    ];
}
/**
 * Adds a value to an existing header, creating a new array if necessary, and canonicalizing the header name.
 *
 * @param headers - The headers object.
 * @param key - The header name to add to.
 * @param value - The value to add.
 */ function addHeader(headers, key, value) {
    canonicalizeHeaders(headers);
    const canonKey = canonicalizeHeaderName(key);
    let list = headers[canonKey];
    if (!list) {
        list = [];
    } else if (!Array.isArray(list)) {
        list = [
            list
        ];
    }
    headers[canonKey] = list;
    list.push(value);
}
/**
 * Canonicalizes a header value, converting numbers to strings.
 *
 * @param value - The value to canonicalize.
 * @returns The canonicalized value as a string.
 */ function canonicalizeValue(value) {
    if (typeof value === 'number') return value.toString();
    return value;
}
/**
 * Canonicalizes all headers in the headers object by ensuring consistent header names and values.
 *
 * @param hdr - The headers object to canonicalize.
 * @returns The headers object with canonicalized header names and values.
 */ function canonicalizeHeaders(hdr) {
    for (const [key, values] of Object.entries(hdr)){
        const canonKey = canonicalizeHeaderName(key);
        if (!hdr[canonKey]) hdr[canonKey] = [];
        if (!Array.isArray(hdr[canonKey])) hdr[canonKey] = [
            canonicalizeValue(hdr[canonKey])
        ];
        if (key === canonKey) continue;
        delete hdr[key];
        hdr[canonKey].push(...[
            values
        ].flat().map((value)=>canonicalizeValue(value)));
    }
    return hdr;
}
/**
 * Removes a header from the headers object.
 *
 * @param headers - The headers object.
 * @param needle - The header name to remove.
 */ function removeHeader(headers, needle) {
    canonicalizeHeaders(headers);
    const canonKey = canonicalizeHeaderName(needle);
    delete headers[canonKey];
}
/**
 * Converts a headers object into an array of tuples, where each tuple represents a header name and value.
 *
 * @param {Object|string[][]} headers - The headers object or undefined/null.
 * @returns {string[][]} An array of tuples where each tuple contains a header name and its corresponding value.
 *
 * @example
 * // Example headers object
 * const headers = {
 *   'Set-Cookie': 'a=b',
 *   'Set-Cookie': 'x=y'
 * };
 *
 * // Converted to an array of tuples
 * const result = convertHeadersToTuples(headers);
 * console.log(result);
 * // Output: [
 * //   ["Set-Cookie", "a=b"],
 * //   ["Set-Cookie", "x=y"]
 * // ]
 */ function flatHeaders(headers) {
    if (!headers) return [];
    return Object.entries(headers).flatMap(([header, values])=>Array.isArray(values) ? values.map((value)=>[
                header,
                value
            ]) : [
            [
                header,
                values
            ]
        ]);
}
;
 //# sourceMappingURL=headers.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/common.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "clientLoggerFactory": (()=>clientLoggerFactory),
    "getUserAgent": (()=>getUserAgent),
    "throwFailedRequest": (()=>throwFailedRequest)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$version$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/version.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/headers.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$platform$2f$runtime$2d$string$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/platform/runtime-string.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/network/build/esm/network.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
function getUserAgent(config) {
    let userAgentPrefix = `${__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LIBRARY_NAME"]} v${__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$version$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SHOPIFY_API_LIBRARY_VERSION"]} | ${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$platform$2f$runtime$2d$string$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractRuntimeString"])()}`;
    if (config.userAgentPrefix) {
        userAgentPrefix = `${config.userAgentPrefix} | ${userAgentPrefix}`;
    }
    return userAgentPrefix;
}
function clientLoggerFactory(config) {
    return (logContent)=>{
        if (config.logger.httpRequests) {
            switch(logContent.type){
                case 'HTTP-Response':
                    {
                        const responseLog = logContent.content;
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).debug('Received response for HTTP request', {
                            requestParams: JSON.stringify(responseLog.requestParams),
                            response: JSON.stringify(responseLog.response)
                        });
                        break;
                    }
                case 'HTTP-Retry':
                    {
                        const responseLog = logContent.content;
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).debug('Retrying HTTP request', {
                            requestParams: JSON.stringify(responseLog.requestParams),
                            retryAttempt: responseLog.retryAttempt,
                            maxRetries: responseLog.maxRetries,
                            response: JSON.stringify(responseLog.lastResponse)
                        });
                        break;
                    }
                default:
                    {
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).debug(`HTTP request event: ${logContent.content}`);
                        break;
                    }
            }
        }
    };
}
function throwFailedRequest(body, atMaxRetries, response) {
    if (typeof response === 'undefined') {
        const message = body?.errors?.message ?? '';
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HttpRequestError"](`Http request error, no response available: ${message}`);
    }
    const responseHeaders = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["canonicalizeHeaders"])(Object.fromEntries(response.headers.entries() ?? []));
    if (response.status === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].Ok && body.errors.graphQLErrors) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["GraphqlQueryError"]({
            message: body.errors.graphQLErrors?.[0].message ?? 'GraphQL operation failed',
            response: response,
            headers: responseHeaders,
            body: body
        });
    }
    const errorMessages = [];
    if (body.errors) {
        errorMessages.push(JSON.stringify(body.errors, null, 2));
    }
    const xRequestId = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getHeader"])(responseHeaders, 'x-request-id');
    if (xRequestId) {
        errorMessages.push(`If you report this error, please include this id: ${xRequestId}`);
    }
    const errorMessage = errorMessages.length ? `:\n${errorMessages.join('\n')}` : '';
    const code = response.status;
    const statusText = response.statusText;
    switch(true){
        case response.status === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].TooManyRequests:
            {
                if (atMaxRetries) {
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HttpMaxRetriesError"]('Attempted the maximum number of retries for HTTP request.');
                } else {
                    const retryAfter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getHeader"])(responseHeaders, 'Retry-After');
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HttpThrottlingError"]({
                        message: `Shopify is throttling requests ${errorMessage}`,
                        code,
                        statusText,
                        body,
                        headers: responseHeaders,
                        retryAfter: retryAfter ? parseFloat(retryAfter) : undefined
                    });
                }
            }
        case response.status >= __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].InternalServerError:
            if (atMaxRetries) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HttpMaxRetriesError"]('Attempted the maximum number of retries for HTTP request.');
            } else {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HttpInternalError"]({
                    message: `Shopify internal error${errorMessage}`,
                    code,
                    statusText,
                    body,
                    headers: responseHeaders
                });
            }
        default:
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HttpResponseError"]({
                message: `Received an error response (${response.status} ${response.statusText}) from Shopify${errorMessage}`,
                code,
                statusText,
                body,
                headers: responseHeaders
            });
    }
}
;
 //# sourceMappingURL=common.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "GraphqlClient": (()=>GraphqlClient),
    "graphqlClientClass": (()=>graphqlClientClass)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/common.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/headers.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/graphql/client.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
class GraphqlClient {
    static config;
    session;
    client;
    apiVersion;
    constructor(params){
        const config = this.graphqlClass().config;
        if (!config.isCustomStoreApp && !params.session.accessToken) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingRequiredArgument"]('Missing access token when creating GraphQL client');
        }
        if (params.apiVersion) {
            const message = params.apiVersion === config.apiVersion ? `Admin client has a redundant API version override to the default ${params.apiVersion}` : `Admin client overriding default API version ${config.apiVersion} with ${params.apiVersion}`;
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).debug(message);
        }
        this.session = params.session;
        this.apiVersion = params.apiVersion;
        this.client = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createAdminApiClient"])({
            accessToken: config.adminApiAccessToken ?? this.session.accessToken,
            apiVersion: this.apiVersion ?? config.apiVersion,
            storeDomain: this.session.shop,
            customFetchApi: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractFetch"],
            logger: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["clientLoggerFactory"])(config),
            userAgentPrefix: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserAgent"])(config),
            isTesting: config.isTesting
        });
    }
    async query(params) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(this.graphqlClass().config).deprecated('12.0.0', 'The query method is deprecated, and was replaced with the request method.\n' + 'See the migration guide: https://github.com/Shopify/shopify-app-js/blob/main/packages/apps/shopify-api/docs/migrating-to-v9.md#using-the-new-clients.');
        if (typeof params.data === 'string' && params.data.length === 0 || Object.entries(params.data).length === 0) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingRequiredArgument"]('Query missing.');
        }
        let operation;
        let variables;
        if (typeof params.data === 'string') {
            operation = params.data;
        } else {
            operation = params.data.query;
            variables = params.data.variables;
        }
        const headers = Object.fromEntries(Object.entries(params?.extraHeaders ?? {}).map(([key, value])=>[
                key,
                Array.isArray(value) ? value.join(', ') : value.toString()
            ]));
        const response = await this.request(operation, {
            headers,
            retries: params.tries ? params.tries - 1 : undefined,
            variables
        });
        return {
            body: response,
            headers: {}
        };
    }
    async request(operation, options) {
        const response = await this.client.request(operation, {
            apiVersion: this.apiVersion || this.graphqlClass().config.apiVersion,
            ...options
        });
        if (response.errors) {
            const fetchResponse = response.errors.response;
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["throwFailedRequest"])(response, (options?.retries ?? 0) > 0, fetchResponse);
        }
        const headerObject = Object.fromEntries(response.headers ? response.headers.entries() : []);
        return {
            ...response,
            headers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["canonicalizeHeaders"])(headerObject ?? {})
        };
    }
    graphqlClass() {
        return this.constructor;
    }
}
function graphqlClientClass({ config }) {
    class NewGraphqlClient extends GraphqlClient {
        static config = config;
    }
    Reflect.defineProperty(NewGraphqlClient, 'name', {
        value: 'GraphqlClient'
    });
    return NewGraphqlClient;
}
;
 //# sourceMappingURL=client.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/utils.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "asBase64": (()=>asBase64),
    "asHex": (()=>asHex),
    "createSHA256HMAC": (()=>createSHA256HMAC),
    "hashString": (()=>hashString)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
;
;
;
async function createSHA256HMAC(secret, payload, returnFormat = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HashFormat"].Base64) {
    const cryptoLib = typeof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["crypto"]?.webcrypto === 'undefined' ? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["crypto"] : __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["crypto"].webcrypto;
    const enc = new TextEncoder();
    const key = await cryptoLib.subtle.importKey('raw', enc.encode(secret), {
        name: 'HMAC',
        hash: {
            name: 'SHA-256'
        }
    }, false, [
        'sign'
    ]);
    const signature = await cryptoLib.subtle.sign('HMAC', key, enc.encode(payload));
    return returnFormat === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HashFormat"].Base64 ? asBase64(signature) : asHex(signature);
}
function asHex(buffer) {
    return [
        ...new Uint8Array(buffer)
    ].map((byte)=>byte.toString(16).padStart(2, '0')).join('');
}
const LookupTable = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
function asBase64(buffer) {
    let output = '';
    const input = new Uint8Array(buffer);
    for(let i = 0; i < input.length;){
        const byte1 = input[i++];
        const byte2 = input[i++];
        const byte3 = input[i++];
        const enc1 = byte1 >> 2;
        const enc2 = (byte1 & 0b00000011) << 4 | byte2 >> 4;
        let enc3 = (byte2 & 0b00001111) << 2 | byte3 >> 6;
        let enc4 = byte3 & 0b00111111;
        if (isNaN(byte2)) {
            enc3 = 64;
        }
        if (isNaN(byte3)) {
            enc4 = 64;
        }
        output += LookupTable[enc1] + LookupTable[enc2] + LookupTable[enc3] + LookupTable[enc4];
    }
    return output;
}
function hashString(str, returnFormat) {
    const buffer = new TextEncoder().encode(str);
    switch(returnFormat){
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HashFormat"].Base64:
            return asBase64(buffer);
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HashFormat"].Hex:
            return asHex(buffer);
        default:
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyError"](`Unrecognized hash format '${returnFormat}'`);
    }
}
;
 //# sourceMappingURL=utils.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/rest/client.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "RestClient": (()=>RestClient),
    "restClientClass": (()=>restClientClass)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/common.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/utils.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/headers.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$rest$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/rest/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/network/build/esm/network.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
class RestClient {
    static config;
    static formatPaths;
    static LINK_HEADER_REGEXP = /<([^<]+)>; rel="([^"]+)"/;
    static DEFAULT_LIMIT = '50';
    static RETRY_WAIT_TIME = 1000;
    static DEPRECATION_ALERT_DELAY = 300000;
    loggedDeprecations = {};
    client;
    session;
    apiVersion;
    constructor({ session, apiVersion }){
        const config = this.restClass().config;
        if (!config.isCustomStoreApp && !session.accessToken) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingRequiredArgument"]('Missing access token when creating REST client');
        }
        if (apiVersion) {
            const message = apiVersion === config.apiVersion ? `REST client has a redundant API version override to the default ${apiVersion}` : `REST client overriding default API version ${config.apiVersion} with ${apiVersion}`;
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).debug(message);
        }
        const customStoreAppAccessToken = config.adminApiAccessToken ?? config.apiSecretKey;
        this.session = session;
        this.apiVersion = apiVersion ?? config.apiVersion;
        this.client = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$rest$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createAdminRestApiClient"])({
            scheme: config.hostScheme,
            storeDomain: session.shop,
            apiVersion: apiVersion ?? config.apiVersion,
            accessToken: config.isCustomStoreApp ? customStoreAppAccessToken : session.accessToken,
            customFetchApi: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractFetch"],
            logger: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["clientLoggerFactory"])(config),
            userAgentPrefix: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserAgent"])(config),
            defaultRetryTime: this.restClass().RETRY_WAIT_TIME,
            formatPaths: this.restClass().formatPaths,
            isTesting: config.isTesting
        });
    }
    /**
     * Performs a GET request on the given path.
     */ async get(params) {
        return this.request({
            method: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Method"].Get,
            ...params
        });
    }
    /**
     * Performs a POST request on the given path.
     */ async post(params) {
        return this.request({
            method: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Method"].Post,
            ...params
        });
    }
    /**
     * Performs a PUT request on the given path.
     */ async put(params) {
        return this.request({
            method: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Method"].Put,
            ...params
        });
    }
    /**
     * Performs a DELETE request on the given path.
     */ async delete(params) {
        return this.request({
            method: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Method"].Delete,
            ...params
        });
    }
    async request(params) {
        const requestParams = {
            headers: {
                ...params.extraHeaders,
                ...params.type ? {
                    'Content-Type': params.type.toString()
                } : {}
            },
            retries: params.tries ? params.tries - 1 : undefined,
            searchParams: params.query
        };
        let response;
        switch(params.method){
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Method"].Get:
                response = await this.client.get(params.path, requestParams);
                break;
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Method"].Put:
                response = await this.client.put(params.path, {
                    ...requestParams,
                    data: params.data
                });
                break;
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Method"].Post:
                response = await this.client.post(params.path, {
                    ...requestParams,
                    data: params.data
                });
                break;
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Method"].Delete:
                response = await this.client.delete(params.path, requestParams);
                break;
            default:
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidRequestError"](`Unsupported request method '${params.method}'`);
        }
        const bodyString = await response.text();
        // Some DELETE requests return an empty body but are still valid responses, we want those to go through
        const body = params.method === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Method"].Delete && bodyString === '' ? {} : JSON.parse(bodyString);
        const responseHeaders = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["canonicalizeHeaders"])(Object.fromEntries(response.headers.entries()));
        if (!response.ok) {
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["throwFailedRequest"])(body, (params.tries ?? 1) > 1, response);
        }
        const requestReturn = {
            body,
            headers: responseHeaders
        };
        await this.logDeprecations({
            method: params.method,
            url: params.path,
            headers: requestParams.headers,
            body: params.data ? JSON.stringify(params.data) : undefined
        }, requestReturn);
        const link = response.headers.get('Link');
        if (link !== undefined) {
            const pageInfo = {
                limit: params.query?.limit ? params.query?.limit.toString() : RestClient.DEFAULT_LIMIT
            };
            if (link) {
                const links = link.split(', ');
                for (const link of links){
                    const parsedLink = link.match(RestClient.LINK_HEADER_REGEXP);
                    if (!parsedLink) {
                        continue;
                    }
                    const linkRel = parsedLink[2];
                    const linkUrl = new URL(parsedLink[1]);
                    const linkFields = linkUrl.searchParams.get('fields');
                    const linkPageToken = linkUrl.searchParams.get('page_info');
                    if (!pageInfo.fields && linkFields) {
                        pageInfo.fields = linkFields.split(',');
                    }
                    if (linkPageToken) {
                        switch(linkRel){
                            case 'previous':
                                pageInfo.previousPageUrl = parsedLink[1];
                                pageInfo.prevPage = this.buildRequestParams(parsedLink[1]);
                                break;
                            case 'next':
                                pageInfo.nextPageUrl = parsedLink[1];
                                pageInfo.nextPage = this.buildRequestParams(parsedLink[1]);
                                break;
                        }
                    }
                }
            }
            requestReturn.pageInfo = pageInfo;
        }
        return requestReturn;
    }
    restClass() {
        return this.constructor;
    }
    buildRequestParams(newPageUrl) {
        const pattern = `^/admin/api/[^/]+/(.*).json$`;
        const url = new URL(newPageUrl);
        const path = url.pathname.replace(new RegExp(pattern), '$1');
        return {
            path,
            query: Object.fromEntries(url.searchParams.entries())
        };
    }
    async logDeprecations(request, response) {
        const config = this.restClass().config;
        const deprecationReason = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getHeader"])(response.headers, 'X-Shopify-API-Deprecated-Reason');
        if (deprecationReason) {
            const deprecation = {
                message: deprecationReason,
                path: request.url
            };
            if (request.body) {
                // This can only be a string, since we're always converting the body before calling this method
                deprecation.body = `${request.body.substring(0, 100)}...`;
            }
            const depHash = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createSHA256HMAC"])(config.apiSecretKey, JSON.stringify(deprecation), __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HashFormat"].Hex);
            if (!Object.keys(this.loggedDeprecations).includes(depHash) || Date.now() - this.loggedDeprecations[depHash] >= RestClient.DEPRECATION_ALERT_DELAY) {
                this.loggedDeprecations[depHash] = Date.now();
                const stack = new Error().stack;
                const message = `API Deprecation Notice ${new Date().toLocaleString()} : ${JSON.stringify(deprecation)}  -  Stack Trace: ${stack}`;
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).warning(message);
            }
        }
    }
}
function restClientClass(params) {
    const { config, formatPaths } = params;
    class NewRestClient extends RestClient {
        static config = config;
        static formatPaths = formatPaths === undefined ? true : formatPaths;
    }
    Reflect.defineProperty(NewRestClient, 'name', {
        value: 'RestClient'
    });
    return NewRestClient;
}
;
 //# sourceMappingURL=client.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/storefront/client.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "StorefrontClient": (()=>StorefrontClient),
    "storefrontClientClass": (()=>storefrontClientClass)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$storefront$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/storefront-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/common.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$storefront$2d$api$2d$client$2f$dist$2f$storefront$2d$api$2d$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/storefront-api-client/dist/storefront-api-client.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
class StorefrontClient {
    static config;
    session;
    client;
    apiVersion;
    constructor(params){
        const config = this.storefrontClass().config;
        if (!config.isCustomStoreApp && !params.session.accessToken) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingRequiredArgument"]('Missing access token when creating GraphQL client');
        }
        if (params.apiVersion) {
            const message = params.apiVersion === config.apiVersion ? `Storefront client has a redundant API version override to the default ${params.apiVersion}` : `Storefront client overriding default API version ${config.apiVersion} with ${params.apiVersion}`;
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).debug(message);
        }
        let accessToken;
        if (config.isCustomStoreApp) {
            accessToken = config.privateAppStorefrontAccessToken;
            if (!accessToken) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingRequiredArgument"]('Custom store apps must set the privateAppStorefrontAccessToken property to call the Storefront API.');
            }
        } else {
            accessToken = params.session.accessToken;
            if (!accessToken) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingRequiredArgument"]('Session missing access token.');
            }
        }
        this.session = params.session;
        this.apiVersion = params.apiVersion;
        this.client = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$storefront$2d$api$2d$client$2f$dist$2f$storefront$2d$api$2d$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createStorefrontApiClient"])({
            privateAccessToken: accessToken,
            apiVersion: this.apiVersion ?? config.apiVersion,
            storeDomain: this.session.shop,
            customFetchApi: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractFetch"],
            logger: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["clientLoggerFactory"])(config),
            clientName: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUserAgent"])(config)
        });
    }
    async query(params) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(this.storefrontClass().config).deprecated('12.0.0', 'The query method is deprecated, and was replaced with the request method.\n' + 'See the migration guide: https://github.com/Shopify/shopify-app-js/blob/main/packages/apps/shopify-api/docs/migrating-to-v9.md#using-the-new-clients.');
        if (typeof params.data === 'string' && params.data.length === 0 || Object.entries(params.data).length === 0) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingRequiredArgument"]('Query missing.');
        }
        let operation;
        let variables;
        if (typeof params.data === 'string') {
            operation = params.data;
        } else {
            operation = params.data.query;
            variables = params.data.variables;
        }
        const headers = Object.fromEntries(Object.entries(params?.extraHeaders ?? {}).map(([key, value])=>[
                key,
                Array.isArray(value) ? value.join(', ') : value.toString()
            ]));
        const response = await this.request(operation, {
            headers,
            retries: params.tries ? params.tries - 1 : undefined,
            variables
        });
        return {
            body: response,
            headers: {}
        };
    }
    async request(operation, options) {
        const response = await this.client.request(operation, {
            apiVersion: this.apiVersion || this.storefrontClass().config.apiVersion,
            ...options
        });
        if (response.errors) {
            const fetchResponse = response.errors.response;
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["throwFailedRequest"])(response, (options?.retries ?? 0) > 0, fetchResponse);
        }
        return response;
    }
    storefrontClass() {
        return this.constructor;
    }
}
function storefrontClientClass(params) {
    const { config } = params;
    class NewStorefrontClient extends StorefrontClient {
        static config = config;
    }
    Reflect.defineProperty(NewStorefrontClient, 'name', {
        value: 'StorefrontClient'
    });
    return NewStorefrontClient;
}
;
 //# sourceMappingURL=client.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/graphql_proxy/graphql_proxy.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "graphqlProxy": (()=>graphqlProxy)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
function graphqlProxy(config) {
    return async ({ session, rawBody })=>{
        if (!session.accessToken) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidSession"]('Cannot proxy query. Session not authenticated.');
        }
        const GraphqlClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
            config
        });
        const client = new GraphqlClient({
            session
        });
        let query;
        let variables;
        if (typeof rawBody === 'string') {
            query = rawBody;
        } else {
            query = rawBody.query;
            variables = rawBody.variables;
        }
        if (!query) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingRequiredArgument"]('Query missing.');
        }
        const response = await client.request(query, {
            variables
        });
        return {
            body: response,
            headers: {}
        };
    };
}
;
 //# sourceMappingURL=graphql_proxy.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "clientClasses": (()=>clientClasses)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$rest$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/rest/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$storefront$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/storefront/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$graphql_proxy$2f$graphql_proxy$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/graphql_proxy/graphql_proxy.mjs [app-route] (ecmascript)");
;
;
;
;
function clientClasses(config) {
    return {
        // We don't pass in the HttpClient because the RestClient inherits from it, and goes through the same setup process
        Rest: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$rest$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["restClientClass"])({
            config
        }),
        Graphql: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
            config
        }),
        Storefront: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$storefront$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["storefrontClientClass"])({
            config
        }),
        graphqlProxy: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$graphql_proxy$2f$graphql_proxy$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlProxy"])(config)
    };
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/processed-query.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "default": (()=>ProcessedQuery)
});
class ProcessedQuery {
    static stringify(keyValuePairs) {
        if (!keyValuePairs || Object.keys(keyValuePairs).length === 0) return '';
        return new ProcessedQuery().putAll(keyValuePairs).stringify();
    }
    processedQuery;
    constructor(){
        this.processedQuery = new URLSearchParams();
    }
    putAll(keyValuePairs) {
        Object.entries(keyValuePairs).forEach(([key, value])=>this.put(key, value));
        return this;
    }
    put(key, value) {
        if (Array.isArray(value)) {
            this.putArray(key, value);
        } else if (value?.constructor === Object) {
            this.putObject(key, value);
        } else {
            this.putSimple(key, value);
        }
    }
    putArray(key, value) {
        value.forEach((arrayValue)=>this.processedQuery.append(`${key}[]`, `${arrayValue}`));
    }
    putObject(key, value) {
        Object.entries(value).forEach(([entry, entryValue])=>{
            this.processedQuery.append(`${key}[${entry}]`, `${entryValue}`);
        });
    }
    putSimple(key, value) {
        this.processedQuery.append(key, `${value}`);
    }
    stringify(omitQuestionMark = false) {
        const queryString = this.processedQuery.toString();
        return omitQuestionMark ? queryString : `?${queryString}`;
    }
}
;
 //# sourceMappingURL=processed-query.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/safe-compare.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "safeCompare": (()=>safeCompare)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
;
const safeCompare = (strA, strB)=>{
    if (typeof strA === typeof strB) {
        const enc = new TextEncoder();
        const buffA = enc.encode(JSON.stringify(strA));
        const buffB = enc.encode(JSON.stringify(strB));
        if (buffA.length === buffB.length) {
            return timingSafeEqual(buffA, buffB);
        }
    } else {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SafeCompareError"](`Mismatched data types provided: ${typeof strA} and ${typeof strB}`);
    }
    return false;
};
// Buffer must be same length for this function to be secure.
function timingSafeEqual(bufA, bufB) {
    const viewA = new Uint8Array(bufA);
    const viewB = new Uint8Array(bufB);
    let out = 0;
    for(let i = 0; i < viewA.length; i++){
        out |= viewA[i] ^ viewB[i];
    }
    return out === 0;
}
;
 //# sourceMappingURL=safe-compare.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/types.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "HmacValidationType": (()=>HmacValidationType),
    "ValidationErrorReason": (()=>ValidationErrorReason)
});
var HmacValidationType;
(function(HmacValidationType) {
    HmacValidationType["Flow"] = "flow";
    HmacValidationType["Webhook"] = "webhook";
    HmacValidationType["FulfillmentService"] = "fulfillment_service";
})(HmacValidationType || (HmacValidationType = {}));
const ValidationErrorReason = {
    MissingBody: 'missing_body',
    InvalidHmac: 'invalid_hmac',
    MissingHmac: 'missing_hmac'
};
;
 //# sourceMappingURL=types.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/hmac-validator.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "generateLocalHmac": (()=>generateLocalHmac),
    "getCurrentTimeInSec": (()=>getCurrentTimeInSec),
    "validateHmac": (()=>validateHmac),
    "validateHmacFromRequestFactory": (()=>validateHmacFromRequestFactory),
    "validateHmacString": (()=>validateHmacString)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/utils.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$safe$2d$compare$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/safe-compare.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$processed$2d$query$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/processed-query.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/headers.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
const HMAC_TIMESTAMP_PERMITTED_CLOCK_TOLERANCE_SEC = 90;
function stringifyQueryForAdmin(query) {
    const processedQuery = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$processed$2d$query$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]();
    Object.keys(query).sort((val1, val2)=>val1.localeCompare(val2)).forEach((key)=>processedQuery.put(key, query[key]));
    return processedQuery.stringify(true);
}
function stringifyQueryForAppProxy(query) {
    return Object.entries(query).sort(([val1], [val2])=>val1.localeCompare(val2)).reduce((acc, [key, value])=>{
        return `${acc}${key}=${Array.isArray(value) ? value.join(',') : value}`;
    }, '');
}
function generateLocalHmac(config) {
    return async (params, signator = 'admin')=>{
        const { hmac, signature, ...query } = params;
        const queryString = signator === 'admin' ? stringifyQueryForAdmin(query) : stringifyQueryForAppProxy(query);
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createSHA256HMAC"])(config.apiSecretKey, queryString, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HashFormat"].Hex);
    };
}
function validateHmac(config) {
    return async (query, { signator } = {
        signator: 'admin'
    })=>{
        if (signator === 'admin' && !query.hmac) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidHmacError"]('Query does not contain an HMAC value.');
        }
        if (signator === 'appProxy' && !query.signature) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidHmacError"]('Query does not contain a signature value.');
        }
        validateHmacTimestamp(query);
        const hmac = signator === 'appProxy' ? query.signature : query.hmac;
        const localHmac = await generateLocalHmac(config)(query, signator);
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$safe$2d$compare$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["safeCompare"])(hmac, localHmac);
    };
}
async function validateHmacString(config, data, hmac, format) {
    const localHmac = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createSHA256HMAC"])(config.apiSecretKey, data, format);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$safe$2d$compare$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["safeCompare"])(hmac, localHmac);
}
function getCurrentTimeInSec() {
    return Math.trunc(Date.now() / 1000);
}
function validateHmacFromRequestFactory(config) {
    return async function validateHmacFromRequest({ type, rawBody, ...adapterArgs }) {
        const request = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertRequest"])(adapterArgs);
        if (!rawBody.length) {
            return fail(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ValidationErrorReason"].MissingBody, type, config);
        }
        const hmac = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getHeader"])(request.headers, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyHeader"].Hmac);
        if (!hmac) {
            return fail(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ValidationErrorReason"].MissingHmac, type, config);
        }
        const validHmac = await validateHmacString(config, rawBody, hmac, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HashFormat"].Base64);
        if (!validHmac) {
            return fail(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ValidationErrorReason"].InvalidHmac, type, config);
        }
        return succeed(type, config);
    };
}
function validateHmacTimestamp(query) {
    if (Math.abs(getCurrentTimeInSec() - Number(query.timestamp)) > HMAC_TIMESTAMP_PERMITTED_CLOCK_TOLERANCE_SEC) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidHmacError"]('HMAC timestamp is outside of the tolerance range');
    }
}
async function fail(reason, type, config) {
    const log = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config);
    await log.debug(`${type} request is not valid`, {
        reason
    });
    return {
        valid: false,
        reason
    };
}
async function succeed(type, config) {
    const log = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config);
    await log.debug(`${type} request is valid`);
    return {
        valid: true
    };
}
;
 //# sourceMappingURL=hmac-validator.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/decode-host.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "decodeHost": (()=>decodeHost)
});
function decodeHost(host) {
    return atob(host);
}
;
 //# sourceMappingURL=decode-host.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-admin-url-helper.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
// Converts admin.shopify.com/store/my-shop to my-shop.myshopify.com
__turbopack_esm__({
    "legacyUrlToShopAdminUrl": (()=>legacyUrlToShopAdminUrl),
    "shopAdminUrlToLegacyUrl": (()=>shopAdminUrlToLegacyUrl)
});
function shopAdminUrlToLegacyUrl(shopAdminUrl) {
    const shopUrl = removeProtocol(shopAdminUrl);
    const isShopAdminUrl = shopUrl.split('.')[0] === 'admin';
    if (!isShopAdminUrl) {
        return null;
    }
    const regex = new RegExp(`admin\\..+/store/([^/]+)`);
    const matches = shopUrl.match(regex);
    if (matches && matches.length === 2) {
        const shopName = matches[1];
        const isSpinUrl = shopUrl.includes('spin.dev/store/');
        if (isSpinUrl) {
            return spinAdminUrlToLegacyUrl(shopUrl);
        } else {
            return `${shopName}.myshopify.com`;
        }
    } else {
        return null;
    }
}
// Converts my-shop.myshopify.com to admin.shopify.com/store/my-shop
function legacyUrlToShopAdminUrl(legacyAdminUrl) {
    const shopUrl = removeProtocol(legacyAdminUrl);
    const regex = new RegExp(`(.+)\\.myshopify\\.com$`);
    const matches = shopUrl.match(regex);
    if (matches && matches.length === 2) {
        const shopName = matches[1];
        return `admin.shopify.com/store/${shopName}`;
    } else {
        const isSpinUrl = shopUrl.endsWith('spin.dev');
        if (isSpinUrl) {
            return spinLegacyUrlToAdminUrl(shopUrl);
        } else {
            return null;
        }
    }
}
function spinAdminUrlToLegacyUrl(shopAdminUrl) {
    const spinRegex = new RegExp(`admin\\.web\\.(.+\\.spin\\.dev)/store/(.+)`);
    const spinMatches = shopAdminUrl.match(spinRegex);
    if (spinMatches && spinMatches.length === 3) {
        const spinUrl = spinMatches[1];
        const shopName = spinMatches[2];
        return `${shopName}.shopify.${spinUrl}`;
    } else {
        return null;
    }
}
function spinLegacyUrlToAdminUrl(legacyAdminUrl) {
    const spinRegex = new RegExp(`(.+)\\.shopify\\.(.+\\.spin\\.dev)`);
    const spinMatches = legacyAdminUrl.match(spinRegex);
    if (spinMatches && spinMatches.length === 3) {
        const shopName = spinMatches[1];
        const spinUrl = spinMatches[2];
        return `admin.web.${spinUrl}/store/${shopName}`;
    } else {
        return null;
    }
}
function removeProtocol(url) {
    return url.replace(/^https?:\/\//, '').replace(/\/$/, '');
}
;
 //# sourceMappingURL=shop-admin-url-helper.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-validator.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "sanitizeHost": (()=>sanitizeHost),
    "sanitizeShop": (()=>sanitizeShop)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$decode$2d$host$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/decode-host.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$admin$2d$url$2d$helper$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-admin-url-helper.mjs [app-route] (ecmascript)");
;
;
;
function sanitizeShop(config) {
    return (shop, throwOnInvalid = false)=>{
        let shopUrl = shop;
        const domainsRegex = [
            'myshopify\\.com',
            'shopify\\.com',
            'myshopify\\.io'
        ];
        if (config.customShopDomains) {
            domainsRegex.push(...config.customShopDomains.map((regex)=>typeof regex === 'string' ? regex : regex.source));
        }
        const shopUrlRegex = new RegExp(`^[a-zA-Z0-9][a-zA-Z0-9-_]*\\.(${domainsRegex.join('|')})[/]*$`);
        const shopAdminRegex = new RegExp(`^admin\\.(${domainsRegex.join('|')})/store/([a-zA-Z0-9][a-zA-Z0-9-_]*)$`);
        const isShopAdminUrl = shopAdminRegex.test(shopUrl);
        if (isShopAdminUrl) {
            shopUrl = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$admin$2d$url$2d$helper$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["shopAdminUrlToLegacyUrl"])(shopUrl) || '';
        }
        const sanitizedShop = shopUrlRegex.test(shopUrl) ? shopUrl : null;
        if (!sanitizedShop && throwOnInvalid) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidShopError"]('Received invalid shop argument');
        }
        return sanitizedShop;
    };
}
function sanitizeHost() {
    return (host, throwOnInvalid = false)=>{
        const base64regex = /^[0-9a-zA-Z+/]+={0,2}$/;
        let sanitizedHost = base64regex.test(host) ? host : null;
        if (sanitizedHost) {
            const { hostname } = new URL(`https://${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$decode$2d$host$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["decodeHost"])(sanitizedHost)}`);
            const originsRegex = [
                'myshopify\\.com',
                'shopify\\.com',
                'myshopify\\.io',
                'spin\\.dev'
            ];
            const hostRegex = new RegExp(`\\.(${originsRegex.join('|')})$`);
            if (!hostRegex.test(hostname)) {
                sanitizedHost = null;
            }
        }
        if (!sanitizedHost && throwOnInvalid) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidHostError"]('Received invalid host argument');
        }
        return sanitizedHost;
    };
}
;
 //# sourceMappingURL=shop-validator.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/types.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "DataType": (()=>DataType)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
/* eslint-disable @shopify/typescript/prefer-pascal-case-enums */ var DataType;
(function(DataType) {
    DataType["JSON"] = "application/json";
    DataType["GraphQL"] = "application/graphql";
    DataType["URLEncoded"] = "application/x-www-form-urlencoded";
})(DataType || (DataType = {}));
;
 //# sourceMappingURL=types.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/fetch-request.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "fetchRequestFactory": (()=>fetchRequestFactory)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
;
;
;
;
;
function fetchRequestFactory(config) {
    return async function fetchRequest(url, options) {
        const log = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config);
        const doLog = config.logger.httpRequests && config.logger.level === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["LogSeverity"].Debug;
        if (doLog) {
            log.debug('Making HTTP request', {
                method: options?.method || 'GET',
                url,
                ...options?.body && {
                    body: options?.body
                }
            });
        }
        const response = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractFetch"])(url, options);
        if (doLog) {
            log.debug('HTTP request completed', {
                method: options?.method || 'GET',
                url,
                status: response.status
            });
        }
        return response;
    };
}
;
 //# sourceMappingURL=fetch-request.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/types.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "SESSION_COOKIE_NAME": (()=>SESSION_COOKIE_NAME),
    "STATE_COOKIE_NAME": (()=>STATE_COOKIE_NAME)
});
const SESSION_COOKIE_NAME = 'shopify_app_session';
const STATE_COOKIE_NAME = 'shopify_app_state';
;
 //# sourceMappingURL=types.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/nonce.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "nonce": (()=>nonce)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
;
;
function nonce() {
    const length = 15;
    const bytes = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["crypto"].getRandomValues(new Uint8Array(length));
    const nonce = bytes.map((byte)=>{
        return byte % 10;
    }).join('');
    return nonce;
}
;
 //# sourceMappingURL=nonce.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/session.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "Session": (()=>Session)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$scopes$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/scopes/index.mjs [app-route] (ecmascript)");
;
;
/* eslint-disable no-fallthrough */ const propertiesToSave = [
    'id',
    'shop',
    'state',
    'isOnline',
    'scope',
    'accessToken',
    'expires',
    'onlineAccessInfo'
];
/**
 * Stores App information from logged in merchants so they can make authenticated requests to the Admin API.
 */ class Session {
    static fromPropertyArray(entries, returnUserData = false) {
        if (!Array.isArray(entries)) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidSession"]('The parameter is not an array: a Session cannot be created from this object.');
        }
        const obj = Object.fromEntries(entries.filter(([_key, value])=>value !== null && value !== undefined)// Sanitize keys
        .map(([key, value])=>{
            switch(key.toLowerCase()){
                case 'isonline':
                    return [
                        'isOnline',
                        value
                    ];
                case 'accesstoken':
                    return [
                        'accessToken',
                        value
                    ];
                case 'onlineaccessinfo':
                    return [
                        'onlineAccessInfo',
                        value
                    ];
                case 'userid':
                    return [
                        'userId',
                        value
                    ];
                case 'firstname':
                    return [
                        'firstName',
                        value
                    ];
                case 'lastname':
                    return [
                        'lastName',
                        value
                    ];
                case 'accountowner':
                    return [
                        'accountOwner',
                        value
                    ];
                case 'emailverified':
                    return [
                        'emailVerified',
                        value
                    ];
                default:
                    return [
                        key.toLowerCase(),
                        value
                    ];
            }
        }));
        const sessionData = {};
        const onlineAccessInfo = {
            associated_user: {}
        };
        Object.entries(obj).forEach(([key, value])=>{
            switch(key){
                case 'isOnline':
                    if (typeof value === 'string') {
                        sessionData[key] = value.toString().toLowerCase() === 'true';
                    } else if (typeof value === 'number') {
                        sessionData[key] = Boolean(value);
                    } else {
                        sessionData[key] = value;
                    }
                    break;
                case 'scope':
                    sessionData[key] = value.toString();
                    break;
                case 'expires':
                    sessionData[key] = value ? new Date(Number(value)) : undefined;
                    break;
                case 'onlineAccessInfo':
                    onlineAccessInfo.associated_user.id = Number(value);
                    break;
                case 'userId':
                    if (returnUserData) {
                        onlineAccessInfo.associated_user.id = Number(value);
                        break;
                    }
                case 'firstName':
                    if (returnUserData) {
                        onlineAccessInfo.associated_user.first_name = String(value);
                        break;
                    }
                case 'lastName':
                    if (returnUserData) {
                        onlineAccessInfo.associated_user.last_name = String(value);
                        break;
                    }
                case 'email':
                    if (returnUserData) {
                        onlineAccessInfo.associated_user.email = String(value);
                        break;
                    }
                case 'accountOwner':
                    if (returnUserData) {
                        onlineAccessInfo.associated_user.account_owner = Boolean(value);
                        break;
                    }
                case 'locale':
                    if (returnUserData) {
                        onlineAccessInfo.associated_user.locale = String(value);
                        break;
                    }
                case 'collaborator':
                    if (returnUserData) {
                        onlineAccessInfo.associated_user.collaborator = Boolean(value);
                        break;
                    }
                case 'emailVerified':
                    if (returnUserData) {
                        onlineAccessInfo.associated_user.email_verified = Boolean(value);
                        break;
                    }
                // Return any user keys as passed in
                default:
                    sessionData[key] = value;
            }
        });
        if (sessionData.isOnline) {
            sessionData.onlineAccessInfo = onlineAccessInfo;
        }
        const session = new Session(sessionData);
        return session;
    }
    /**
     * The unique identifier for the session.
     */ id;
    /**
     * The Shopify shop domain, such as `example.myshopify.com`.
     */ shop;
    /**
     * The state of the session. Used for the OAuth authentication code flow.
     */ state;
    /**
     * Whether the access token in the session is online or offline.
     */ isOnline;
    /**
     * The desired scopes for the access token, at the time the session was created.
     */ scope;
    /**
     * The date the access token expires.
     */ expires;
    /**
     * The access token for the session.
     */ accessToken;
    /**
     * Information on the user for the session. Only present for online sessions.
     */ onlineAccessInfo;
    constructor(params){
        Object.assign(this, params);
    }
    /**
     * Whether the session is active. Active sessions have an access token that is not expired, and has has the given
     * scopes if scopes is equal to a truthy value.
     */ isActive(scopes) {
        const hasAccessToken = Boolean(this.accessToken);
        const isTokenNotExpired = !this.isExpired();
        const isScopeChanged = this.isScopeChanged(scopes);
        return !isScopeChanged && hasAccessToken && isTokenNotExpired;
    }
    /**
     * Whether the access token includes the given scopes if they are provided.
     */ isScopeChanged(scopes) {
        if (typeof scopes === 'undefined') {
            return false;
        }
        return !this.isScopeIncluded(scopes);
    }
    /**
     * Whether the access token includes the given scopes.
     */ isScopeIncluded(scopes) {
        const requiredScopes = scopes instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$scopes$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AuthScopes"] ? scopes : new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$scopes$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AuthScopes"](scopes);
        const sessionScopes = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$scopes$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AuthScopes"](this.scope);
        return sessionScopes.has(requiredScopes);
    }
    /**
     * Whether the access token is expired.
     */ isExpired(withinMillisecondsOfExpiry = 0) {
        return Boolean(this.expires && this.expires.getTime() - withinMillisecondsOfExpiry < Date.now());
    }
    /**
     * Converts an object with data into a Session.
     */ toObject() {
        const object = {
            id: this.id,
            shop: this.shop,
            state: this.state,
            isOnline: this.isOnline
        };
        if (this.scope) {
            object.scope = this.scope;
        }
        if (this.expires) {
            object.expires = this.expires;
        }
        if (this.accessToken) {
            object.accessToken = this.accessToken;
        }
        if (this.onlineAccessInfo) {
            object.onlineAccessInfo = this.onlineAccessInfo;
        }
        return object;
    }
    /**
     * Checks whether the given session is equal to this session.
     */ equals(other) {
        if (!other) return false;
        const mandatoryPropsMatch = this.id === other.id && this.shop === other.shop && this.state === other.state && this.isOnline === other.isOnline;
        if (!mandatoryPropsMatch) return false;
        const copyA = this.toPropertyArray(true);
        copyA.sort(([k1], [k2])=>k1 < k2 ? -1 : 1);
        const copyB = other.toPropertyArray(true);
        copyB.sort(([k1], [k2])=>k1 < k2 ? -1 : 1);
        return JSON.stringify(copyA) === JSON.stringify(copyB);
    }
    /**
     * Converts the session into an array of key-value pairs.
     */ toPropertyArray(returnUserData = false) {
        return Object.entries(this).filter(([key, value])=>propertiesToSave.includes(key) && value !== undefined && value !== null)// Prepare values for db storage
        .flatMap(([key, value])=>{
            switch(key){
                case 'expires':
                    return [
                        [
                            key,
                            value ? value.getTime() : undefined
                        ]
                    ];
                case 'onlineAccessInfo':
                    // eslint-disable-next-line no-negated-condition
                    if (!returnUserData) {
                        return [
                            [
                                key,
                                value.associated_user.id
                            ]
                        ];
                    } else {
                        return [
                            [
                                'userId',
                                value?.associated_user?.id
                            ],
                            [
                                'firstName',
                                value?.associated_user?.first_name
                            ],
                            [
                                'lastName',
                                value?.associated_user?.last_name
                            ],
                            [
                                'email',
                                value?.associated_user?.email
                            ],
                            [
                                'locale',
                                value?.associated_user?.locale
                            ],
                            [
                                'emailVerified',
                                value?.associated_user?.email_verified
                            ],
                            [
                                'accountOwner',
                                value?.associated_user?.account_owner
                            ],
                            [
                                'collaborator',
                                value?.associated_user?.collaborator
                            ]
                        ];
                    }
                default:
                    return [
                        [
                            key,
                            value
                        ]
                    ];
            }
        })// Filter out tuples with undefined values
        .filter(([_key, value])=>value !== undefined);
    }
}
;
 //# sourceMappingURL=session.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/get-hmac-key.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "getHMACKey": (()=>getHMACKey)
});
function getHMACKey(key) {
    const arrayBuffer = new Uint8Array(key.length);
    for(let i = 0, keyLen = key.length; i < keyLen; i++){
        arrayBuffer[i] = key.charCodeAt(i);
    }
    return arrayBuffer;
}
;
 //# sourceMappingURL=get-hmac-key.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/decode-session-token.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "decodeSessionToken": (()=>decodeSessionToken)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$get$2d$hmac$2d$key$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/get-hmac-key.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$node$2f$esm$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/jose/dist/node/esm/index.js [app-route] (ecmascript)");
;
;
;
const JWT_PERMITTED_CLOCK_TOLERANCE = 10;
function decodeSessionToken(config) {
    return async (token, { checkAudience = true } = {})=>{
        let payload;
        try {
            payload = (await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jose$2f$dist$2f$node$2f$esm$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__.jwtVerify(token, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$get$2d$hmac$2d$key$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getHMACKey"])(config.apiSecretKey), {
                algorithms: [
                    'HS256'
                ],
                clockTolerance: JWT_PERMITTED_CLOCK_TOLERANCE
            })).payload;
        } catch (error) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidJwtError"](`Failed to parse session token '${token}': ${error.message}`);
        }
        // The exp and nbf fields are validated by the JWT library
        if (checkAudience && payload.aud !== config.apiKey) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidJwtError"]('Session token had invalid API key');
        }
        return payload;
    };
}
;
 //# sourceMappingURL=decode-session-token.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/utils.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "splitN": (()=>splitN)
});
function splitN(str, sep, maxNumParts) {
    const parts = str.split(sep);
    const maxParts = Math.min(Math.abs(maxNumParts), parts.length);
    return [
        ...parts.slice(0, maxParts - 1),
        parts.slice(maxParts - 1).join(sep)
    ];
}
;
 //# sourceMappingURL=utils.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/cookies.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "Cookies": (()=>Cookies)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/utils.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/utils.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/headers.mjs [app-route] (ecmascript)");
;
;
;
// import type {Headers} from "./headers";
class Cookies {
    response;
    static parseCookies(hdrs) {
        const entries = hdrs.filter((hdr)=>hdr.trim().length > 0).map((cookieDef)=>{
            const [keyval, ...opts] = cookieDef.split(';');
            const [name, value] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["splitN"])(keyval, '=', 2).map((value)=>value.trim());
            return [
                name,
                {
                    name,
                    value,
                    ...Object.fromEntries(opts.map((opt)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["splitN"])(opt, '=', 2).map((value)=>value.trim())))
                }
            ];
        });
        const jar = Object.fromEntries(entries);
        for (const cookie of Object.values(jar)){
            if (typeof cookie.expires === 'string') {
                cookie.expires = new Date(cookie.expires);
            }
        }
        return jar;
    }
    static encodeCookie(data) {
        let result = '';
        result += `${data.name}=${data.value};`;
        result += Object.entries(data).filter(([key])=>![
                'name',
                'value',
                'expires'
            ].includes(key)).map(([key, value])=>`${key}=${value}`).join('; ');
        if (data.expires) {
            result += ';';
            result += `expires=${data.expires.toUTCString()}`;
        }
        return result;
    }
    receivedCookieJar = {};
    outgoingCookieJar = {};
    keys = [];
    constructor(request, response, { keys = [] } = {}){
        this.response = response;
        if (keys) this.keys = keys;
        const cookieReqHdr = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getHeader"])(request.headers, 'Cookie') ?? '';
        this.receivedCookieJar = Cookies.parseCookies(cookieReqHdr.split(';'));
        const cookieResHdr = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getHeaders"])(response.headers, 'Set-Cookie') ?? [];
        this.outgoingCookieJar = Cookies.parseCookies(cookieResHdr);
    }
    toHeaders() {
        return Object.values(this.outgoingCookieJar).map((cookie)=>Cookies.encodeCookie(cookie));
    }
    updateHeader() {
        if (!this.response.headers) {
            this.response.headers = {};
        }
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["removeHeader"])(this.response.headers, 'Set-Cookie');
        this.toHeaders().map((hdr)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addHeader"])(this.response.headers, 'Set-Cookie', hdr));
    }
    get(name) {
        return this.receivedCookieJar[name]?.value;
    }
    deleteCookie(name) {
        this.set(name, '', {
            path: '/',
            expires: new Date(0)
        });
    }
    async getAndVerify(name) {
        const value = this.get(name);
        if (!value) return undefined;
        if (!await this.isSignedCookieValid(name)) {
            return undefined;
        }
        return value;
    }
    get canSign() {
        return this.keys?.length > 0;
    }
    set(name, value, opts = {}) {
        this.outgoingCookieJar[name] = {
            ...opts,
            name,
            value
        };
        this.updateHeader();
    }
    async setAndSign(name, value, opts = {}) {
        if (!this.canSign) {
            throw Error('No keys provided for signing.');
        }
        this.set(name, value, opts);
        const sigName = `${name}.sig`;
        const signature = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createSHA256HMAC"])(this.keys[0], value);
        this.set(sigName, signature, opts);
        this.updateHeader();
    }
    async isSignedCookieValid(cookieName) {
        const signedCookieName = `${cookieName}.sig`;
        if (!this.cookieExists(cookieName) || !this.cookieExists(signedCookieName)) {
            this.deleteInvalidCookies(cookieName, signedCookieName);
            return false;
        }
        const cookieValue = this.get(cookieName);
        const signature = this.get(signedCookieName);
        if (!cookieValue || !signature) {
            this.deleteInvalidCookies(cookieName, signedCookieName);
            return false;
        }
        const allCheckSignatures = await Promise.all(this.keys.map((key)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createSHA256HMAC"])(key, cookieValue)));
        if (!allCheckSignatures.includes(signature)) {
            this.deleteInvalidCookies(cookieName, signedCookieName);
            return false;
        }
        return true;
    }
    cookieExists(cookieName) {
        return Boolean(this.get(cookieName));
    }
    deleteInvalidCookies(...cookieNames) {
        cookieNames.forEach((cookieName)=>this.deleteCookie(cookieName));
    }
}
;
 //# sourceMappingURL=cookies.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/session-utils.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "customAppSession": (()=>customAppSession),
    "getCurrentSessionId": (()=>getCurrentSessionId),
    "getJwtSessionId": (()=>getJwtSessionId),
    "getOfflineId": (()=>getOfflineId)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-validator.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$decode$2d$session$2d$token$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/decode-session-token.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/session.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$cookies$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/cookies.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
function getJwtSessionId(config) {
    return (shop, userId)=>{
        return `${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeShop"])(config)(shop, true)}_${userId}`;
    };
}
function getOfflineId(config) {
    return (shop)=>{
        return `offline_${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeShop"])(config)(shop, true)}`;
    };
}
function getCurrentSessionId(config) {
    return async function getCurrentSessionId({ isOnline, ...adapterArgs }) {
        const request = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertRequest"])(adapterArgs);
        const log = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config);
        if (config.isEmbeddedApp) {
            log.debug('App is embedded, looking for session id in JWT payload', {
                isOnline
            });
            const authHeader = request.headers.Authorization;
            if (authHeader) {
                const matches = (typeof authHeader === 'string' ? authHeader : authHeader[0]).match(/^Bearer (.+)$/);
                if (!matches) {
                    log.error('Missing Bearer token in authorization header', {
                        isOnline
                    });
                    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingJwtTokenError"]('Missing Bearer token in authorization header');
                }
                const jwtPayload = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$decode$2d$session$2d$token$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["decodeSessionToken"])(config)(matches[1]);
                const shop = jwtPayload.dest.replace(/^https:\/\//, '');
                log.debug('Found valid JWT payload', {
                    shop,
                    isOnline
                });
                if (isOnline) {
                    return getJwtSessionId(config)(shop, jwtPayload.sub);
                } else {
                    return getOfflineId(config)(shop);
                }
            } else {
                log.error('Missing Authorization header, was the request made with authenticatedFetch?', {
                    isOnline
                });
            }
        } else {
            log.debug('App is not embedded, looking for session id in cookies', {
                isOnline
            });
            const cookies = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$cookies$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Cookies"](request, {}, {
                keys: [
                    config.apiSecretKey
                ]
            });
            return cookies.getAndVerify(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SESSION_COOKIE_NAME"]);
        }
        return undefined;
    };
}
function customAppSession(config) {
    return (shop)=>{
        return new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Session"]({
            id: '',
            shop: `${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeShop"])(config)(shop, true)}`,
            state: '',
            isOnline: false
        });
    };
}
;
 //# sourceMappingURL=session-utils.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/create-session.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "createSession": (()=>createSession)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/session.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2d$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/session-utils.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2f$esm$2f$v4$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__ = __turbopack_import__("[project]/node_modules/uuid/dist/esm/v4.js [app-route] (ecmascript) <export default as v4>");
;
;
;
;
function createSession({ config, accessTokenResponse, shop, state }) {
    const associatedUser = accessTokenResponse.associated_user;
    const isOnline = Boolean(associatedUser);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).info('Creating new session', {
        shop,
        isOnline
    });
    if (isOnline) {
        let sessionId;
        const responseBody = accessTokenResponse;
        const { access_token, scope, ...rest } = responseBody;
        const sessionExpiration = new Date(Date.now() + responseBody.expires_in * 1000);
        if (config.isEmbeddedApp) {
            sessionId = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2d$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getJwtSessionId"])(config)(shop, `${rest.associated_user.id}`);
        } else {
            sessionId = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$uuid$2f$dist$2f$esm$2f$v4$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__default__as__v4$3e$__["v4"])();
        }
        return new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Session"]({
            id: sessionId,
            shop,
            state,
            isOnline,
            accessToken: access_token,
            scope,
            expires: sessionExpiration,
            onlineAccessInfo: rest
        });
    } else {
        return new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Session"]({
            id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2d$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getOfflineId"])(config)(shop),
            shop,
            state,
            isOnline,
            accessToken: accessTokenResponse.access_token,
            scope: accessTokenResponse.scope
        });
    }
}
;
 //# sourceMappingURL=create-session.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/oauth.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "begin": (()=>begin),
    "callback": (()=>callback)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/common.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$processed$2d$query$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/processed-query.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$hmac$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/hmac-validator.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-validator.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$fetch$2d$request$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/fetch-request.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$nonce$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/nonce.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$safe$2d$compare$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/safe-compare.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$create$2d$session$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/create-session.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$cookies$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/cookies.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$isbot$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/isbot/index.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
const logForBot = ({ request, log, func })=>{
    log.debug(`Possible bot request to auth ${func}: `, {
        userAgent: request.headers['User-Agent']
    });
};
function begin(config) {
    return async ({ shop, callbackPath, isOnline, ...adapterArgs })=>{
        throwIfCustomStoreApp(config.isCustomStoreApp, 'Cannot perform OAuth for private apps');
        const log = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config);
        log.info('Beginning OAuth', {
            shop,
            isOnline,
            callbackPath
        });
        const request = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertRequest"])(adapterArgs);
        const response = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertIncomingResponse"])(adapterArgs);
        let userAgent = request.headers['User-Agent'];
        if (Array.isArray(userAgent)) {
            userAgent = userAgent[0];
        }
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$isbot$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isbot"])(userAgent)) {
            logForBot({
                request,
                log,
                func: 'begin'
            });
            response.statusCode = 410;
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertResponse"])(response, adapterArgs);
        }
        const cookies = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$cookies$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Cookies"](request, response, {
            keys: [
                config.apiSecretKey
            ],
            secure: true
        });
        const state = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$nonce$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["nonce"])();
        await cookies.setAndSign(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["STATE_COOKIE_NAME"], state, {
            expires: new Date(Date.now() + 60000),
            sameSite: 'lax',
            secure: true,
            path: callbackPath
        });
        const scopes = config.scopes ? config.scopes.toString() : '';
        const query = {
            client_id: config.apiKey,
            scope: scopes,
            redirect_uri: `${config.hostScheme}://${config.hostName}${callbackPath}`,
            state,
            'grant_options[]': isOnline ? 'per-user' : ''
        };
        const processedQuery = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$processed$2d$query$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]();
        processedQuery.putAll(query);
        const cleanShop = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeShop"])(config)(shop, true);
        const redirectUrl = `https://${cleanShop}/admin/oauth/authorize${processedQuery.stringify()}`;
        response.statusCode = 302;
        response.statusText = 'Found';
        response.headers = {
            ...response.headers,
            ...cookies.response.headers,
            Location: redirectUrl
        };
        log.debug(`OAuth started, redirecting to ${redirectUrl}`, {
            shop,
            isOnline
        });
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertResponse"])(response, adapterArgs);
    };
}
function callback(config) {
    return async function callback({ ...adapterArgs }) {
        throwIfCustomStoreApp(config.isCustomStoreApp, 'Cannot perform OAuth for private apps');
        const log = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config);
        const request = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertRequest"])(adapterArgs);
        const query = new URL(request.url, `${config.hostScheme}://${config.hostName}`).searchParams;
        const shop = query.get('shop');
        const response = {};
        let userAgent = request.headers['User-Agent'];
        if (Array.isArray(userAgent)) {
            userAgent = userAgent[0];
        }
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$isbot$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isbot"])(userAgent)) {
            logForBot({
                request,
                log,
                func: 'callback'
            });
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BotActivityDetected"]('Invalid OAuth callback initiated by bot');
        }
        log.info('Completing OAuth', {
            shop
        });
        const cookies = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$cookies$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Cookies"](request, response, {
            keys: [
                config.apiSecretKey
            ],
            secure: true
        });
        const stateFromCookie = await cookies.getAndVerify(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["STATE_COOKIE_NAME"]);
        cookies.deleteCookie(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["STATE_COOKIE_NAME"]);
        if (!stateFromCookie) {
            log.error('Could not find OAuth cookie', {
                shop
            });
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CookieNotFound"](`Cannot complete OAuth process. Could not find an OAuth cookie for shop url: ${shop}`);
        }
        const authQuery = Object.fromEntries(query.entries());
        if (!await validQuery({
            config,
            query: authQuery,
            stateFromCookie
        })) {
            log.error('Invalid OAuth callback', {
                shop,
                stateFromCookie
            });
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidOAuthError"]('Invalid OAuth callback.');
        }
        log.debug('OAuth request is valid, requesting access token', {
            shop
        });
        const body = {
            client_id: config.apiKey,
            client_secret: config.apiSecretKey,
            code: query.get('code')
        };
        const cleanShop = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeShop"])(config)(query.get('shop'), true);
        const postResponse = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$fetch$2d$request$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fetchRequestFactory"])(config)(`https://${cleanShop}/admin/oauth/access_token`, {
            method: 'POST',
            body: JSON.stringify(body),
            headers: {
                'Content-Type': __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DataType"].JSON,
                Accept: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DataType"].JSON
            }
        });
        if (!postResponse.ok) {
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["throwFailedRequest"])(await postResponse.json(), false, postResponse);
        }
        const session = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$create$2d$session$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createSession"])({
            accessTokenResponse: await postResponse.json(),
            shop: cleanShop,
            state: stateFromCookie,
            config
        });
        if (!config.isEmbeddedApp) {
            await cookies.setAndSign(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SESSION_COOKIE_NAME"], session.id, {
                expires: session.expires,
                sameSite: 'lax',
                secure: true,
                path: '/'
            });
        }
        return {
            headers: await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertHeaders"])(cookies.response.headers, adapterArgs),
            session
        };
    };
}
async function validQuery({ config, query, stateFromCookie }) {
    return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$hmac$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateHmac"])(config)(query) && (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$safe$2d$compare$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["safeCompare"])(query.state, stateFromCookie);
}
function throwIfCustomStoreApp(isCustomStoreApp, message) {
    if (isCustomStoreApp) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PrivateAppError"](message);
    }
}
;
 //# sourceMappingURL=oauth.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/get-embedded-app-url.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "buildEmbeddedAppUrl": (()=>buildEmbeddedAppUrl),
    "getEmbeddedAppUrl": (()=>getEmbeddedAppUrl)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-validator.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$decode$2d$host$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/decode-host.mjs [app-route] (ecmascript)");
;
;
;
;
function getEmbeddedAppUrl(config) {
    return async ({ ...adapterArgs })=>{
        const request = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertRequest"])(adapterArgs);
        if (!request) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingRequiredArgument"]('getEmbeddedAppUrl requires a request object argument');
        }
        if (!request.url) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidRequestError"]('Request does not contain a URL');
        }
        const url = new URL(request.url, `https://${request.headers.host}`);
        const host = url.searchParams.get('host');
        if (typeof host !== 'string') {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidRequestError"]('Request does not contain a host query parameter');
        }
        return buildEmbeddedAppUrl(config)(host);
    };
}
function buildEmbeddedAppUrl(config) {
    return (host)=>{
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeHost"])()(host, true);
        const decodedHost = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$decode$2d$host$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["decodeHost"])(host);
        return `https://${decodedHost}/apps/${config.apiKey}`;
    };
}
;
 //# sourceMappingURL=get-embedded-app-url.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/token-exchange.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "RequestedTokenType": (()=>RequestedTokenType),
    "tokenExchange": (()=>tokenExchange)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/common.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$decode$2d$session$2d$token$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/decode-session-token.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-validator.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$fetch$2d$request$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/fetch-request.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$create$2d$session$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/create-session.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
var RequestedTokenType;
(function(RequestedTokenType) {
    RequestedTokenType["OnlineAccessToken"] = "urn:shopify:params:oauth:token-type:online-access-token";
    RequestedTokenType["OfflineAccessToken"] = "urn:shopify:params:oauth:token-type:offline-access-token";
})(RequestedTokenType || (RequestedTokenType = {}));
const TokenExchangeGrantType = 'urn:ietf:params:oauth:grant-type:token-exchange';
const IdTokenType = 'urn:ietf:params:oauth:token-type:id_token';
function tokenExchange(config) {
    return async ({ shop, sessionToken, requestedTokenType })=>{
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$decode$2d$session$2d$token$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["decodeSessionToken"])(config)(sessionToken);
        const body = {
            client_id: config.apiKey,
            client_secret: config.apiSecretKey,
            grant_type: TokenExchangeGrantType,
            subject_token: sessionToken,
            subject_token_type: IdTokenType,
            requested_token_type: requestedTokenType
        };
        const cleanShop = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeShop"])(config)(shop, true);
        const postResponse = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$fetch$2d$request$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fetchRequestFactory"])(config)(`https://${cleanShop}/admin/oauth/access_token`, {
            method: 'POST',
            body: JSON.stringify(body),
            headers: {
                'Content-Type': __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DataType"].JSON,
                Accept: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DataType"].JSON
            }
        });
        if (!postResponse.ok) {
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$common$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["throwFailedRequest"])(await postResponse.json(), false, postResponse);
        }
        return {
            session: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$create$2d$session$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createSession"])({
                accessTokenResponse: await postResponse.json(),
                shop: cleanShop,
                // We need to keep this as an empty string as our template DB schemas have this required
                state: '',
                config
            })
        };
    };
}
;
 //# sourceMappingURL=token-exchange.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "shopifyAuth": (()=>shopifyAuth)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$oauth$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/oauth.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$nonce$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/nonce.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$safe$2d$compare$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/safe-compare.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$get$2d$embedded$2d$app$2d$url$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/get-embedded-app-url.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$token$2d$exchange$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/token-exchange.mjs [app-route] (ecmascript)");
;
;
;
;
;
function shopifyAuth(config) {
    const shopify = {
        begin: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$oauth$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["begin"])(config),
        callback: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$oauth$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["callback"])(config),
        nonce: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$nonce$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["nonce"],
        safeCompare: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$safe$2d$compare$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["safeCompare"],
        getEmbeddedAppUrl: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$get$2d$embedded$2d$app$2d$url$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getEmbeddedAppUrl"])(config),
        buildEmbeddedAppUrl: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$get$2d$embedded$2d$app$2d$url$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["buildEmbeddedAppUrl"])(config),
        tokenExchange: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$token$2d$exchange$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["tokenExchange"])(config)
    };
    return shopify;
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "shopifySession": (()=>shopifySession)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$decode$2d$session$2d$token$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/decode-session-token.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2d$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/session-utils.mjs [app-route] (ecmascript)");
;
;
function shopifySession(config) {
    return {
        customAppSession: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2d$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["customAppSession"])(config),
        getCurrentId: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2d$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getCurrentSessionId"])(config),
        getOfflineId: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2d$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getOfflineId"])(config),
        getJwtSessionId: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2d$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getJwtSessionId"])(config),
        decodeSessionToken: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$decode$2d$session$2d$token$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["decodeSessionToken"])(config)
    };
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/version-compatible.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "versionCompatible": (()=>versionCompatible),
    "versionPriorTo": (()=>versionPriorTo)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
;
function versionCompatible(config) {
    return (referenceVersion, currentVersion = config.apiVersion)=>{
        // Return true if not using a dated version
        if (currentVersion === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ApiVersion"].Unstable) {
            return true;
        }
        const numericVersion = (version)=>parseInt(version.replace('-', ''), 10);
        const current = numericVersion(currentVersion);
        const reference = numericVersion(referenceVersion);
        return current >= reference;
    };
}
function versionPriorTo(config) {
    return (referenceVersion, currentVersion = config.apiVersion)=>{
        return !versionCompatible(config)(referenceVersion, currentVersion);
    };
}
;
 //# sourceMappingURL=version-compatible.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "shopifyUtils": (()=>shopifyUtils)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-validator.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$hmac$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/hmac-validator.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$version$2d$compatible$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/version-compatible.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$admin$2d$url$2d$helper$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/shop-admin-url-helper.mjs [app-route] (ecmascript)");
;
;
;
;
function shopifyUtils(config) {
    return {
        sanitizeShop: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeShop"])(config),
        sanitizeHost: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeHost"])(),
        validateHmac: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$hmac$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateHmac"])(config),
        versionCompatible: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$version$2d$compatible$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["versionCompatible"])(config),
        versionPriorTo: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$version$2d$compatible$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["versionPriorTo"])(config),
        shopAdminUrlToLegacyUrl: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$admin$2d$url$2d$helper$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["shopAdminUrlToLegacyUrl"],
        legacyUrlToShopAdminUrl: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$shop$2d$admin$2d$url$2d$helper$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["legacyUrlToShopAdminUrl"]
    };
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/types.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "DeliveryMethod": (()=>DeliveryMethod),
    "WebhookOperation": (()=>WebhookOperation),
    "WebhookValidationErrorReason": (()=>WebhookValidationErrorReason)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/types.mjs [app-route] (ecmascript)");
;
var DeliveryMethod;
(function(DeliveryMethod) {
    DeliveryMethod["Http"] = "http";
    DeliveryMethod["EventBridge"] = "eventbridge";
    DeliveryMethod["PubSub"] = "pubsub";
})(DeliveryMethod || (DeliveryMethod = {}));
// eslint-disable-next-line no-warning-comments
// TODO Rethink the wording for this enum - the operations we're doing are actually "subscribing" and "unsubscribing"
// Consider changing the values when releasing v12.0.0 when it can be safely deprecated
var WebhookOperation;
(function(WebhookOperation) {
    WebhookOperation["Create"] = "create";
    WebhookOperation["Update"] = "update";
    WebhookOperation["Delete"] = "delete";
})(WebhookOperation || (WebhookOperation = {}));
const WebhookValidationErrorReason = {
    ...__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ValidationErrorReason"],
    MissingHeaders: 'missing_headers'
};
;
 //# sourceMappingURL=types.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/registry.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "addHandlers": (()=>addHandlers),
    "addHostToCallbackUrl": (()=>addHostToCallbackUrl),
    "getHandlers": (()=>getHandlers),
    "getTopicsAdded": (()=>getTopicsAdded),
    "handlerIdentifier": (()=>handlerIdentifier),
    "registry": (()=>registry),
    "topicForStorage": (()=>topicForStorage)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/types.mjs [app-route] (ecmascript)");
;
;
;
function registry() {
    return {};
}
function topicForStorage(topic) {
    return topic.toUpperCase().replace(/\/|\./g, '_');
}
function addHandlers(config, webhookRegistry) {
    return function addHandlers(handlersToAdd) {
        for (const [topic, handlers] of Object.entries(handlersToAdd)){
            const topicKey = topicForStorage(topic);
            if (Array.isArray(handlers)) {
                for (const handler of handlers){
                    mergeOrAddHandler(config, webhookRegistry, topicKey, handler);
                }
            } else {
                mergeOrAddHandler(config, webhookRegistry, topicKey, handlers);
            }
        }
    };
}
function getTopicsAdded(webhookRegistry) {
    return function getTopicsAdded() {
        return Object.keys(webhookRegistry);
    };
}
function getHandlers(webhookRegistry) {
    return function getHandlers(topic) {
        return webhookRegistry[topicForStorage(topic)] || [];
    };
}
function handlerIdentifier(config, handler) {
    const prefix = handler.deliveryMethod;
    switch(handler.deliveryMethod){
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].Http:
            return `${prefix}_${addHostToCallbackUrl(config, handler.callbackUrl)}`;
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].EventBridge:
            return `${prefix}_${handler.arn}`;
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].PubSub:
            return `${prefix}_${handler.pubSubProject}:${handler.pubSubTopic}`;
        default:
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidDeliveryMethodError"](`Unrecognized delivery method '${handler.deliveryMethod}'`);
    }
}
function addHostToCallbackUrl(config, callbackUrl) {
    if (callbackUrl.startsWith('/')) {
        return `${config.hostScheme}://${config.hostName}${callbackUrl}`;
    } else {
        return callbackUrl;
    }
}
function mergeOrAddHandler(config, webhookRegistry, topic, handler) {
    const log = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config);
    handler.includeFields?.sort();
    handler.metafieldNamespaces?.sort();
    if (!(topic in webhookRegistry)) {
        webhookRegistry[topic] = [
            handler
        ];
        return;
    }
    const identifier = handlerIdentifier(config, handler);
    for(const index in webhookRegistry[topic]){
        if (!Object.prototype.hasOwnProperty.call(webhookRegistry[topic], index)) {
            continue;
        }
        const existingHandler = webhookRegistry[topic][index];
        const existingIdentifier = handlerIdentifier(config, existingHandler);
        if (identifier !== existingIdentifier) {
            continue;
        }
        if (handler.deliveryMethod === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].Http) {
            log.info(`Detected multiple handlers for '${topic}', webhooks.process will call them sequentially`);
            break;
        } else {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidDeliveryMethodError"](`Can only add multiple handlers for a topic when deliveryMethod is Http. Please be sure that you used addHandler method once after creating ShopifyApi instance in your app.  Invalid handler: ${JSON.stringify(handler)}`);
        }
    }
    webhookRegistry[topic].push(handler);
}
;
 //# sourceMappingURL=registry.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/query-template.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "queryTemplate": (()=>queryTemplate)
});
function queryTemplate(template, params) {
    let query = template;
    Object.entries(params).forEach(([key, value])=>{
        query = query.replace(`{{${key}}}`, value);
    });
    return query;
}
;
 //# sourceMappingURL=query-template.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/register.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "TEMPLATE_GET_HANDLERS": (()=>TEMPLATE_GET_HANDLERS),
    "TEMPLATE_MUTATION": (()=>TEMPLATE_MUTATION),
    "register": (()=>register)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/registry.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$query$2d$template$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/query-template.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/types.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
function register(config, webhookRegistry) {
    return async function register({ session }) {
        const log = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config);
        log.info('Registering webhooks', {
            shop: session.shop
        });
        const registerReturn = Object.keys(webhookRegistry).reduce((acc, topic)=>{
            acc[topic] = [];
            return acc;
        }, {});
        const existingHandlers = await getExistingHandlers(config, session);
        log.debug(`Existing topics: [${Object.keys(existingHandlers).join(', ')}]`, {
            shop: session.shop
        });
        for(const topic in webhookRegistry){
            if (!Object.prototype.hasOwnProperty.call(webhookRegistry, topic)) {
                continue;
            }
            if (__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["privacyTopics"].includes(topic)) {
                continue;
            }
            registerReturn[topic] = await registerTopic({
                config,
                session,
                topic,
                existingHandlers: existingHandlers[topic] || [],
                handlers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getHandlers"])(webhookRegistry)(topic)
            });
            // Remove this topic from the list of existing handlers so we have a list of leftovers
            delete existingHandlers[topic];
        }
        // Delete any leftover handlers
        for(const topic in existingHandlers){
            if (!Object.prototype.hasOwnProperty.call(existingHandlers, topic)) {
                continue;
            }
            const GraphqlClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
                config
            });
            const client = new GraphqlClient({
                session
            });
            registerReturn[topic] = await runMutations({
                config,
                client,
                topic,
                handlers: existingHandlers[topic],
                operation: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookOperation"].Delete
            });
        }
        return registerReturn;
    };
}
async function getExistingHandlers(config, session) {
    const GraphqlClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
        config
    });
    const client = new GraphqlClient({
        session
    });
    const existingHandlers = {};
    let hasNextPage;
    let endCursor = null;
    do {
        const query = buildCheckQuery(endCursor);
        const response = await client.request(query);
        response.data?.webhookSubscriptions?.edges.forEach((edge)=>{
            const handler = buildHandlerFromNode(edge);
            if (!existingHandlers[edge.node.topic]) {
                existingHandlers[edge.node.topic] = [];
            }
            existingHandlers[edge.node.topic].push(handler);
        });
        endCursor = response.data?.webhookSubscriptions?.pageInfo.endCursor;
        hasNextPage = response.data?.webhookSubscriptions?.pageInfo.hasNextPage;
    }while (hasNextPage)
    return existingHandlers;
}
function buildCheckQuery(endCursor) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$query$2d$template$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["queryTemplate"])(TEMPLATE_GET_HANDLERS, {
        END_CURSOR: JSON.stringify(endCursor)
    });
}
function buildHandlerFromNode(edge) {
    const endpoint = edge.node.endpoint;
    let handler;
    switch(endpoint.__typename){
        case 'WebhookHttpEndpoint':
            handler = {
                deliveryMethod: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].Http,
                callbackUrl: endpoint.callbackUrl,
                // This is a dummy for now because we don't really care about it
                callback: async ()=>{}
            };
            break;
        case 'WebhookEventBridgeEndpoint':
            handler = {
                deliveryMethod: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].EventBridge,
                arn: endpoint.arn
            };
            break;
        case 'WebhookPubSubEndpoint':
            handler = {
                deliveryMethod: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].PubSub,
                pubSubProject: endpoint.pubSubProject,
                pubSubTopic: endpoint.pubSubTopic
            };
            break;
    }
    // Set common fields
    handler.id = edge.node.id;
    handler.includeFields = edge.node.includeFields;
    handler.metafieldNamespaces = edge.node.metafieldNamespaces;
    // Sort the array fields to make them cheaper to compare later on
    handler.includeFields?.sort();
    handler.metafieldNamespaces?.sort();
    return handler;
}
async function registerTopic({ config, session, topic, existingHandlers, handlers }) {
    let registerResults = [];
    const { toCreate, toUpdate, toDelete } = categorizeHandlers(config, existingHandlers, handlers);
    const GraphqlClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
        config
    });
    const client = new GraphqlClient({
        session
    });
    let operation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookOperation"].Create;
    registerResults = registerResults.concat(await runMutations({
        config,
        client,
        topic,
        operation,
        handlers: toCreate
    }));
    operation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookOperation"].Update;
    registerResults = registerResults.concat(await runMutations({
        config,
        client,
        topic,
        operation,
        handlers: toUpdate
    }));
    operation = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookOperation"].Delete;
    registerResults = registerResults.concat(await runMutations({
        config,
        client,
        topic,
        operation,
        handlers: toDelete
    }));
    return registerResults;
}
function categorizeHandlers(config, existingHandlers, handlers) {
    const handlersByKey = handlers.reduce((acc, value)=>{
        acc[(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["handlerIdentifier"])(config, value)] = value;
        return acc;
    }, {});
    const existingHandlersByKey = existingHandlers.reduce((acc, value)=>{
        acc[(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["handlerIdentifier"])(config, value)] = value;
        return acc;
    }, {});
    const toCreate = {
        ...handlersByKey
    };
    const toUpdate = {};
    const toDelete = {};
    for(const existingKey in existingHandlersByKey){
        if (!Object.prototype.hasOwnProperty.call(existingHandlersByKey, existingKey)) {
            continue;
        }
        const existingHandler = existingHandlersByKey[existingKey];
        const handler = handlersByKey[existingKey];
        if (existingKey in handlersByKey) {
            delete toCreate[existingKey];
            if (!areHandlerFieldsEqual(existingHandler, handler)) {
                toUpdate[existingKey] = handler;
                toUpdate[existingKey].id = existingHandler.id;
            }
        } else {
            toDelete[existingKey] = existingHandler;
        }
    }
    return {
        toCreate: Object.values(toCreate),
        toUpdate: Object.values(toUpdate),
        toDelete: Object.values(toDelete)
    };
}
function areHandlerFieldsEqual(arr1, arr2) {
    const includeFieldsEqual = arraysEqual(arr1.includeFields || [], arr2.includeFields || []);
    const metafieldNamespacesEqual = arraysEqual(arr1.metafieldNamespaces || [], arr2.metafieldNamespaces || []);
    return includeFieldsEqual && metafieldNamespacesEqual;
}
function arraysEqual(arr1, arr2) {
    if (arr1.length !== arr2.length) {
        return false;
    }
    for(let i = 0; i < arr1.length; i++){
        if (arr1[i] !== arr2[i]) {
            return false;
        }
    }
    return true;
}
async function runMutations({ config, client, topic, handlers, operation }) {
    const registerResults = [];
    for (const handler of handlers){
        registerResults.push(await runMutation({
            config,
            client,
            topic,
            handler,
            operation
        }));
    }
    return registerResults;
}
async function runMutation({ config, client, topic, handler, operation }) {
    let registerResult;
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).debug(`Running webhook mutation`, {
        topic,
        operation
    });
    try {
        const query = buildMutation(config, topic, handler, operation);
        const result = await client.request(query);
        registerResult = {
            deliveryMethod: handler.deliveryMethod,
            success: isSuccess(result, handler, operation),
            result,
            operation
        };
    } catch (error) {
        if (error instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidDeliveryMethodError"]) {
            registerResult = {
                deliveryMethod: handler.deliveryMethod,
                success: false,
                result: {
                    message: error.message
                },
                operation
            };
        } else {
            throw error;
        }
    }
    return registerResult;
}
function buildMutation(config, topic, handler, operation) {
    const params = {};
    let identifier;
    if (handler.id) {
        identifier = `id: "${handler.id}"`;
    } else {
        identifier = `topic: ${topic}`;
    }
    const mutationArguments = {
        MUTATION_NAME: getMutationName(handler, operation),
        IDENTIFIER: identifier,
        MUTATION_PARAMS: ''
    };
    if (operation !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookOperation"].Delete) {
        switch(handler.deliveryMethod){
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].Http:
                params.callbackUrl = `"${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addHostToCallbackUrl"])(config, handler.callbackUrl)}"`;
                break;
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].EventBridge:
                params.arn = `"${handler.arn}"`;
                break;
            case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].PubSub:
                params.pubSubProject = `"${handler.pubSubProject}"`;
                params.pubSubTopic = `"${handler.pubSubTopic}"`;
                break;
            default:
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidDeliveryMethodError"](`Unrecognized delivery method '${handler.deliveryMethod}'`);
        }
        if (handler.includeFields) {
            params.includeFields = JSON.stringify(handler.includeFields);
        }
        if (handler.metafieldNamespaces) {
            params.metafieldNamespaces = JSON.stringify(handler.metafieldNamespaces);
        }
        if (handler.subTopic) {
            const subTopicString = `subTopic: "${handler.subTopic}",`;
            mutationArguments.MUTATION_PARAMS = subTopicString;
        }
        const paramsString = Object.entries(params).map(([key, value])=>`${key}: ${value}`).join(', ');
        mutationArguments.MUTATION_PARAMS += `webhookSubscription: {${paramsString}}`;
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$query$2d$template$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["queryTemplate"])(TEMPLATE_MUTATION, mutationArguments);
}
function getMutationName(handler, operation) {
    switch(operation){
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookOperation"].Create:
            return `${getEndpoint(handler)}Create`;
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookOperation"].Update:
            return `${getEndpoint(handler)}Update`;
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookOperation"].Delete:
            return 'webhookSubscriptionDelete';
        default:
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyError"](`Unrecognized operation '${operation}'`);
    }
}
function getEndpoint(handler) {
    switch(handler.deliveryMethod){
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].Http:
            return 'webhookSubscription';
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].EventBridge:
            return 'eventBridgeWebhookSubscription';
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].PubSub:
            return 'pubSubWebhookSubscription';
        default:
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyError"](`Unrecognized delivery method '${handler.deliveryMethod}'`);
    }
}
function isSuccess(result, handler, operation) {
    const mutationName = getMutationName(handler, operation);
    return Boolean(result.data && result.data[mutationName] && result.data[mutationName].userErrors.length === 0);
}
const TEMPLATE_GET_HANDLERS = `query shopifyApiReadWebhookSubscriptions {
  webhookSubscriptions(
    first: 250,
    after: {{END_CURSOR}},
  ) {
    edges {
      node {
        id
        topic
        includeFields
        metafieldNamespaces
        endpoint {
          __typename
          ... on WebhookHttpEndpoint {
            callbackUrl
          }
          ... on WebhookEventBridgeEndpoint {
            arn
          }
          ... on WebhookPubSubEndpoint {
            pubSubProject
            pubSubTopic
          }
        }
      }
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}`;
const TEMPLATE_MUTATION = `
  mutation shopifyApiCreateWebhookSubscription {
    {{MUTATION_NAME}}(
      {{IDENTIFIER}},
      {{MUTATION_PARAMS}}
    ) {
      userErrors {
        field
        message
      }
    }
  }
`;
;
 //# sourceMappingURL=register.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/validate.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "validateFactory": (()=>validateFactory)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$hmac$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/hmac-validator.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/registry.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/headers.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
const OPTIONAL_HANDLER_PROPERTIES = {
    subTopic: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyHeader"].SubTopic
};
const HANDLER_PROPERTIES = {
    apiVersion: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyHeader"].ApiVersion,
    domain: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyHeader"].Domain,
    hmac: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyHeader"].Hmac,
    topic: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyHeader"].Topic,
    webhookId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ShopifyHeader"].WebhookId,
    ...OPTIONAL_HANDLER_PROPERTIES
};
function validateFactory(config) {
    return async function validate({ rawBody, ...adapterArgs }) {
        const request = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertRequest"])(adapterArgs);
        const validHmacResult = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$hmac$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateHmacFromRequestFactory"])(config)({
            type: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HmacValidationType"].Webhook,
            rawBody,
            ...adapterArgs
        });
        if (!validHmacResult.valid) {
            if (validHmacResult.reason === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ValidationErrorReason"].InvalidHmac) {
                const log = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config);
                await log.debug("Webhook HMAC validation failed. Please note that events manually triggered from a store's Notifications settings will fail this validation. To test this, please use the CLI or trigger the actual event in a development store.");
            }
            return validHmacResult;
        }
        return checkWebhookHeaders(request.headers);
    };
}
function checkWebhookHeaders(headers) {
    const missingHeaders = [];
    const entries = Object.entries(HANDLER_PROPERTIES);
    const headerValues = entries.reduce((acc, [property, headerName])=>{
        const headerValue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getHeader"])(headers, headerName);
        if (headerValue) {
            acc[property] = headerValue;
        } else if (!(property in OPTIONAL_HANDLER_PROPERTIES)) {
            missingHeaders.push(headerName);
        }
        return acc;
    }, {});
    if (missingHeaders.length) {
        return {
            valid: false,
            reason: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookValidationErrorReason"].MissingHeaders,
            missingHeaders
        };
    } else {
        return {
            valid: true,
            ...headerValues,
            ...headerValues.subTopic ? {
                subTopic: headerValues.subTopic
            } : {},
            topic: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["topicForStorage"])(headerValues.topic)
        };
    }
}
;
 //# sourceMappingURL=validate.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/process.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "process": (()=>process)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$validate$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/validate.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/network/build/esm/network.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
const STATUS_TEXT_LOOKUP = {
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].Ok]: 'OK',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].BadRequest]: 'Bad Request',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].Unauthorized]: 'Unauthorized',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].NotFound]: 'Not Found',
    [__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].InternalServerError]: 'Internal Server Error'
};
function process(config, webhookRegistry) {
    return async function process({ context, rawBody, ...adapterArgs }) {
        const response = {
            statusCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].Ok,
            statusText: STATUS_TEXT_LOOKUP[__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].Ok],
            headers: {}
        };
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).info('Receiving webhook request');
        const webhookCheck = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$validate$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateFactory"])(config)({
            rawBody,
            ...adapterArgs
        });
        let errorMessage = 'Unknown error while handling webhook';
        if (webhookCheck.valid) {
            const handlerResult = await callWebhookHandlers(config, webhookRegistry, webhookCheck, rawBody, context);
            response.statusCode = handlerResult.statusCode;
            if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isOK"])(response)) {
                errorMessage = handlerResult.errorMessage || errorMessage;
            }
        } else {
            const errorResult = await handleInvalidWebhook(config, webhookCheck);
            response.statusCode = errorResult.statusCode;
            response.statusText = STATUS_TEXT_LOOKUP[response.statusCode];
            errorMessage = errorResult.errorMessage;
        }
        const returnResponse = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractConvertResponse"])(response, adapterArgs);
        if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isOK"])(response)) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["InvalidWebhookError"]({
                message: errorMessage,
                response: returnResponse
            });
        }
        return Promise.resolve(returnResponse);
    };
}
async function callWebhookHandlers(config, webhookRegistry, webhookCheck, rawBody, context) {
    const log = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config);
    const { hmac: _hmac, valid: _valid, ...loggingContext } = webhookCheck;
    await log.debug('Webhook request is valid, looking for HTTP handlers to call', loggingContext);
    const handlers = webhookRegistry[webhookCheck.topic] || [];
    const response = {
        statusCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].Ok
    };
    let found = false;
    for (const handler of handlers){
        if (handler.deliveryMethod !== __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DeliveryMethod"].Http) {
            continue;
        }
        if (!handler.callback) {
            response.statusCode = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].InternalServerError;
            response.errorMessage = "Cannot call webhooks.process with a webhook handler that doesn't have a callback";
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MissingWebhookCallbackError"]({
                message: response.errorMessage,
                response
            });
        }
        found = true;
        await log.debug('Found HTTP handler, triggering it', loggingContext);
        try {
            await handler.callback(webhookCheck.topic, webhookCheck.domain, rawBody, webhookCheck.webhookId, webhookCheck.apiVersion, ...webhookCheck?.subTopic ? webhookCheck.subTopic : '', context);
        } catch (error) {
            response.statusCode = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].InternalServerError;
            response.errorMessage = error.message;
        }
    }
    if (!found) {
        await log.debug('No HTTP handlers found', loggingContext);
        response.statusCode = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].NotFound;
        response.errorMessage = `No HTTP webhooks registered for topic ${webhookCheck.topic}`;
    }
    return response;
}
async function handleInvalidWebhook(config, webhookCheck) {
    const response = {
        statusCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].InternalServerError,
        errorMessage: 'Unknown error while handling webhook'
    };
    switch(webhookCheck.reason){
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookValidationErrorReason"].MissingHeaders:
            response.statusCode = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].BadRequest;
            response.errorMessage = `Missing one or more of the required HTTP headers to process webhooks: [${webhookCheck.missingHeaders.join(', ')}]`;
            break;
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookValidationErrorReason"].MissingBody:
            response.statusCode = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].BadRequest;
            response.errorMessage = 'No body was received when processing webhook';
            break;
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookValidationErrorReason"].MissingHmac:
            response.statusCode = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].BadRequest;
            response.errorMessage = `Missing HMAC header in request`;
            break;
        case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WebhookValidationErrorReason"].InvalidHmac:
            response.statusCode = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$network$2f$build$2f$esm$2f$network$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StatusCode"].Unauthorized;
            response.errorMessage = `Could not validate request HMAC`;
            break;
    }
    await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(config).debug(`Webhook request is invalid, returning ${response.statusCode}: ${response.errorMessage}`);
    return response;
}
;
 //# sourceMappingURL=process.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "shopifyWebhooks": (()=>shopifyWebhooks)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/registry.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$register$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/register.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$process$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/process.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$validate$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/validate.mjs [app-route] (ecmascript)");
;
;
;
;
function shopifyWebhooks(config) {
    const webhookRegistry = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["registry"])();
    return {
        addHandlers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addHandlers"])(config, webhookRegistry),
        getTopicsAdded: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getTopicsAdded"])(webhookRegistry),
        getHandlers: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$registry$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getHandlers"])(webhookRegistry),
        register: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$register$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["register"])(config, webhookRegistry),
        process: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$process$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["process"])(config, webhookRegistry),
        validate: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$validate$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateFactory"])(config)
    };
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/check.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "assessPayments": (()=>assessPayments),
    "check": (()=>check)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
function check(config) {
    return async function check(params) {
        if (!config.future?.unstable_managedPricingSupport && !config.billing) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                message: 'Attempted to look for purchases without billing configs',
                errorData: []
            });
        }
        const { session, isTest = true, plans } = params;
        const returnObject = params.returnObject ?? false;
        const GraphqlClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
            config
        });
        const client = new GraphqlClient({
            session
        });
        const payments = await assessPayments({
            client,
            isTest,
            plans
        });
        if (config.future?.unstable_managedPricingSupport || returnObject) {
            return payments;
        } else {
            return payments.hasActivePayment;
        }
    };
}
async function assessPayments({ client, isTest, plans }) {
    const returnValue = {
        hasActivePayment: false,
        oneTimePurchases: [],
        appSubscriptions: []
    };
    let installation;
    let endCursor = null;
    do {
        const currentInstallations = await client.request(HAS_PAYMENTS_QUERY, {
            variables: {
                endCursor
            }
        });
        installation = currentInstallations.data?.currentAppInstallation;
        installation.activeSubscriptions.forEach((subscription)=>{
            if (subscriptionMeetsCriteria({
                subscription,
                isTest,
                plans
            })) {
                returnValue.hasActivePayment = true;
                returnValue.appSubscriptions.push(subscription);
            }
        });
        installation.oneTimePurchases.edges.forEach(({ node: purchase })=>{
            if (purchaseMeetsCriteria({
                purchase,
                isTest,
                plans
            })) {
                returnValue.hasActivePayment = true;
                returnValue.oneTimePurchases.push(purchase);
            }
        });
        endCursor = installation.oneTimePurchases.pageInfo.endCursor;
    }while (installation?.oneTimePurchases.pageInfo.hasNextPage)
    return returnValue;
}
function subscriptionMeetsCriteria({ subscription, isTest, plans }) {
    return (typeof plans === 'undefined' || plans.includes(subscription.name)) && (isTest || !subscription.test);
}
function purchaseMeetsCriteria({ purchase, isTest, plans }) {
    return (typeof plans === 'undefined' || plans.includes(purchase.name)) && (isTest || !purchase.test) && purchase.status === 'ACTIVE';
}
const HAS_PAYMENTS_QUERY = `
  query appSubscription($endCursor: String) {
    currentAppInstallation {
      activeSubscriptions {
        id
        name
        test
        status
        lineItems {
          id
          plan {
            pricingDetails {
              ... on AppRecurringPricing {
                price {
                  amount
                  currencyCode
                }
                interval
                discount {
                  durationLimitInIntervals
                  remainingDurationInIntervals
                  priceAfterDiscount {
                    amount
                  }
                  value {
                    ... on AppSubscriptionDiscountAmount {
                      amount {
                        amount
                        currencyCode
                      }
                    }
                    ... on AppSubscriptionDiscountPercentage {
                      percentage
                    }
                  }
                }
              }
              ... on AppUsagePricing {
                balanceUsed {
                  amount
                  currencyCode
                }
                cappedAmount {
                  amount
                  currencyCode
                }
                terms
              }
            }
          }
        }
      }
      oneTimePurchases(first: 250, sortKey: CREATED_AT, after: $endCursor) {
        edges {
          node {
            id
            name
            test
            status
          }
        }
        pageInfo {
          hasNextPage
          endCursor
        }
      }
    }
  }
`;
;
 //# sourceMappingURL=check.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/request.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "request": (()=>request)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$get$2d$embedded$2d$app$2d$url$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/get-embedded-app-url.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/utils.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
function request(config) {
    return async function({ session, plan, isTest = true, returnUrl: returnUrlParam, returnObject = false, ...overrides }) {
        if (!config.billing || !config.billing[plan]) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                message: `Could not find plan ${plan} in billing settings`,
                errorData: []
            });
        }
        const billingConfig = {
            ...config.billing[plan]
        };
        const filteredOverrides = Object.fromEntries(Object.entries(overrides).filter(([_key, value])=>value !== undefined));
        const cleanShopName = session.shop.replace('.myshopify.com', '');
        const embeddedAppUrl = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$get$2d$embedded$2d$app$2d$url$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["buildEmbeddedAppUrl"])(config)((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$utils$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["hashString"])(`admin.shopify.com/store/${cleanShopName}`, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HashFormat"].Base64));
        const appUrl = `${config.hostScheme}://${config.hostName}?shop=${session.shop}`;
        // if provided a return URL, use it, otherwise use the embedded app URL or hosted app URL
        const returnUrl = returnUrlParam || (config.isEmbeddedApp ? embeddedAppUrl : appUrl);
        const GraphqlClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
            config
        });
        const client = new GraphqlClient({
            session
        });
        function isLineItemPlan(billingConfig) {
            return 'lineItems' in billingConfig;
        }
        function isOneTimePlan(billingConfig) {
            return billingConfig.interval === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingInterval"].OneTime;
        }
        let data;
        if (isLineItemPlan(billingConfig)) {
            const mergedBillingConfigs = mergeBillingConfigs(billingConfig, filteredOverrides);
            const mutationRecurringResponse = await requestSubscriptionPayment({
                billingConfig: mergedBillingConfigs,
                plan,
                client,
                returnUrl,
                isTest
            });
            data = mutationRecurringResponse.appSubscriptionCreate;
        } else if (isOneTimePlan(billingConfig)) {
            const mutationOneTimeResponse = await requestSinglePayment({
                billingConfig: {
                    ...billingConfig,
                    ...filteredOverrides
                },
                plan,
                client,
                returnUrl,
                isTest
            });
            data = mutationOneTimeResponse.appPurchaseOneTimeCreate;
        } else {
            switch(billingConfig.interval){
                case __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingInterval"].Usage:
                    {
                        const mutationUsageResponse = await requestUsagePayment({
                            billingConfig: {
                                ...billingConfig,
                                ...filteredOverrides
                            },
                            plan,
                            client,
                            returnUrl,
                            isTest
                        });
                        data = mutationUsageResponse.appSubscriptionCreate;
                        break;
                    }
                default:
                    {
                        const mutationRecurringResponse = await requestRecurringPayment({
                            billingConfig: {
                                ...billingConfig,
                                ...filteredOverrides
                            },
                            plan,
                            client,
                            returnUrl,
                            isTest
                        });
                        data = mutationRecurringResponse.appSubscriptionCreate;
                    }
            }
        }
        if (data.userErrors?.length) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                message: 'Error while billing the store',
                errorData: data.userErrors
            });
        }
        if (returnObject) {
            return data;
        } else {
            return data.confirmationUrl;
        }
    };
}
async function requestSubscriptionPayment({ billingConfig, plan, client, returnUrl, isTest }) {
    const lineItems = billingConfig.lineItems.map((item)=>{
        if (item.interval === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingInterval"].Every30Days || item.interval === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingInterval"].Annual) {
            const appRecurringPricingDetails = {
                interval: item.interval,
                price: {
                    amount: item.amount,
                    currencyCode: item.currencyCode
                }
            };
            if (item.discount) {
                appRecurringPricingDetails.discount = {
                    durationLimitInIntervals: item.discount.durationLimitInIntervals,
                    value: {
                        amount: item.discount.value.amount,
                        percentage: item.discount.value.percentage
                    }
                };
            }
            return {
                plan: {
                    appRecurringPricingDetails
                }
            };
        } else if (item.interval === __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingInterval"].Usage) {
            const appUsagePricingDetails = {
                terms: item.terms,
                cappedAmount: {
                    amount: item.amount,
                    currencyCode: item.currencyCode
                }
            };
            return {
                plan: {
                    appUsagePricingDetails
                }
            };
        } else {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                message: 'Invalid interval provided',
                errorData: [
                    item
                ]
            });
        }
    });
    const mutationResponse = await client.request(RECURRING_PURCHASE_MUTATION, {
        variables: {
            name: plan,
            trialDays: billingConfig.trialDays,
            replacementBehavior: billingConfig.replacementBehavior,
            returnUrl,
            test: isTest,
            lineItems
        }
    });
    if (mutationResponse.errors) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
            message: 'Error while billing the store',
            errorData: mutationResponse.errors
        });
    }
    return mutationResponse.data;
}
async function requestRecurringPayment({ billingConfig, plan, client, returnUrl, isTest }) {
    const mutationResponse = await client.request(RECURRING_PURCHASE_MUTATION, {
        variables: {
            name: plan,
            trialDays: billingConfig.trialDays,
            replacementBehavior: billingConfig.replacementBehavior,
            returnUrl,
            test: isTest,
            lineItems: [
                {
                    plan: {
                        appRecurringPricingDetails: {
                            interval: billingConfig.interval,
                            price: {
                                amount: billingConfig.amount,
                                currencyCode: billingConfig.currencyCode
                            },
                            discount: {
                                durationLimitInIntervals: billingConfig.discount?.durationLimitInIntervals,
                                value: {
                                    amount: billingConfig.discount?.value?.amount,
                                    percentage: billingConfig.discount?.value?.percentage
                                }
                            }
                        }
                    }
                }
            ]
        }
    });
    if (mutationResponse.errors) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
            message: 'Error while billing the store',
            errorData: mutationResponse.errors
        });
    }
    return mutationResponse.data;
}
async function requestUsagePayment({ billingConfig, plan, client, returnUrl, isTest }) {
    const mutationResponse = await client.request(RECURRING_PURCHASE_MUTATION, {
        variables: {
            name: plan,
            returnUrl,
            test: isTest,
            trialDays: billingConfig.trialDays,
            replacementBehavior: billingConfig.replacementBehavior,
            lineItems: [
                {
                    plan: {
                        appUsagePricingDetails: {
                            terms: billingConfig.usageTerms,
                            cappedAmount: {
                                amount: billingConfig.amount,
                                currencyCode: billingConfig.currencyCode
                            }
                        }
                    }
                }
            ]
        }
    });
    if (mutationResponse.errors) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
            message: `Error while billing the store:: ${mutationResponse.errors}`,
            errorData: mutationResponse.errors
        });
    }
    return mutationResponse.data;
}
async function requestSinglePayment({ billingConfig, plan, client, returnUrl, isTest }) {
    const mutationResponse = await client.request(ONE_TIME_PURCHASE_MUTATION, {
        variables: {
            name: plan,
            returnUrl,
            test: isTest,
            price: {
                amount: billingConfig.amount,
                currencyCode: billingConfig.currencyCode
            }
        }
    });
    if (mutationResponse.errors) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
            message: 'Error while billing the store',
            errorData: mutationResponse.errors
        });
    }
    return mutationResponse.data;
}
function mergeBillingConfigs(billingConfig, overrides) {
    const mergedConfig = {
        ...billingConfig,
        ...overrides
    };
    const mergedLineItems = [];
    if (billingConfig.lineItems && overrides.lineItems) {
        for (const i of billingConfig.lineItems){
            let found = false;
            for (const j of overrides.lineItems){
                if (i.interval === j.interval) {
                    mergedLineItems.push({
                        ...i,
                        ...j
                    });
                    found = true;
                    break;
                }
            }
            if (!found) {
                mergedLineItems.push(i);
            }
        }
        mergedConfig.lineItems = mergedLineItems;
    }
    return mergedConfig;
}
const RECURRING_PURCHASE_MUTATION = `
  mutation test(
    $name: String!
    $lineItems: [AppSubscriptionLineItemInput!]!
    $returnUrl: URL!
    $test: Boolean
    $trialDays: Int
    $replacementBehavior: AppSubscriptionReplacementBehavior
  ) {
    appSubscriptionCreate(
      name: $name
      lineItems: $lineItems
      returnUrl: $returnUrl
      test: $test
      trialDays: $trialDays
      replacementBehavior: $replacementBehavior
    ) {
      appSubscription {
        id
        name
        test
      }
      confirmationUrl
      userErrors {
        field
        message
      }
    }
  }
`;
const ONE_TIME_PURCHASE_MUTATION = `
  mutation test(
    $name: String!
    $price: MoneyInput!
    $returnUrl: URL!
    $test: Boolean
  ) {
    appPurchaseOneTimeCreate(
      name: $name
      price: $price
      returnUrl: $returnUrl
      test: $test
    ) {
      appPurchaseOneTime {
        id
        name
        test
      }
      confirmationUrl
      userErrors {
        field
        message
      }
    }
  }
`;
;
 //# sourceMappingURL=request.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/cancel.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "cancel": (()=>cancel)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
const CANCEL_MUTATION = `
  mutation appSubscriptionCancel($id: ID!, $prorate: Boolean) {
    appSubscriptionCancel(id: $id, prorate: $prorate) {
      appSubscription {
        id
        name
        test
      }
      userErrors {
        field
        message
      }
    }
  }
`;
function cancel(config) {
    return async function(subscriptionInfo) {
        const { session, subscriptionId, prorate = true } = subscriptionInfo;
        const GraphqlClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
            config
        });
        const client = new GraphqlClient({
            session
        });
        try {
            const response = await client.request(CANCEL_MUTATION, {
                variables: {
                    id: subscriptionId,
                    prorate
                }
            });
            if (response.data?.appSubscriptionCancel?.userErrors.length) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                    message: 'Error while canceling a subscription',
                    errorData: response.data?.appSubscriptionCancel?.userErrors
                });
            }
            return response.data?.appSubscriptionCancel?.appSubscription;
        } catch (error) {
            if (error instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["GraphqlQueryError"]) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                    message: error.message,
                    errorData: error.response?.errors
                });
            } else {
                throw error;
            }
        }
    };
}
;
 //# sourceMappingURL=cancel.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/subscriptions.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "subscriptions": (()=>subscriptions)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
const SUBSCRIPTION_QUERY = `
query appSubscription {
  currentAppInstallation {
    activeSubscriptions {
      id
      name
      test
      lineItems {
        id
        plan {
          pricingDetails {
            ... on AppRecurringPricing {
              price {
                amount
                currencyCode
              }
              interval
              discount {
                durationLimitInIntervals
                remainingDurationInIntervals
                priceAfterDiscount {
                  amount
                }
                value {
                  ... on AppSubscriptionDiscountAmount {
                    amount {
                      amount
                      currencyCode
                    }
                  }
                  ... on AppSubscriptionDiscountPercentage {
                    percentage
                  }
                }
              }
            }
            ... on AppUsagePricing {
              balanceUsed {
                amount
                currencyCode
              }
              cappedAmount {
                amount
                currencyCode
              }
              terms
            }
          }
        }
      }
    }
  }
}
`;
function subscriptions(config) {
    return async function({ session }) {
        if (!config.future?.unstable_managedPricingSupport && !config.billing) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                message: 'Attempted to look for purchases without billing configs',
                errorData: []
            });
        }
        const GraphqlClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
            config
        });
        const client = new GraphqlClient({
            session
        });
        const response = await client.request(SUBSCRIPTION_QUERY);
        return response.data?.currentAppInstallation;
    };
}
;
 //# sourceMappingURL=subscriptions.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/create-usage-record.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "createUsageRecord": (()=>createUsageRecord)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$check$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/check.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
const CREATE_USAGE_RECORD_MUTATION = `
mutation appUsageRecordCreate($description: String!, $price: MoneyInput!, $subscriptionLineItemId: ID!) {
  appUsageRecordCreate(description: $description, price: $price, subscriptionLineItemId: $subscriptionLineItemId) {
    userErrors {
      field
      message
    }
    appUsageRecord {
      id
      description
      idempotencyKey
      price {
        amount
        currencyCode
      }
      subscriptionLineItem {
        id
        plan {
          pricingDetails {
            ... on AppUsagePricing {
              balanceUsed {
                amount
                currencyCode
              }
              cappedAmount {
                amount
                currencyCode
              }
              terms
            }
          }
        }
      }
    }
  }
}
`;
function createUsageRecord(config) {
    return async function createUsageRecord(usageRecordInfo) {
        const { session, subscriptionLineItemId, description, price, idempotencyKey, isTest = true } = usageRecordInfo;
        const GraphqlClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
            config
        });
        const client = new GraphqlClient({
            session
        });
        // If a subscription line item ID is not passed, we will query Shopify
        // for an active usage subscription line item ID
        const usageSubscriptionLineItemId = subscriptionLineItemId ? subscriptionLineItemId : await getUsageRecordSubscriptionLineItemId({
            client,
            isTest
        });
        const variables = {
            description,
            price,
            subscriptionLineItemId: usageSubscriptionLineItemId
        };
        if (idempotencyKey) {
            variables.idempotencyKey = idempotencyKey;
        }
        try {
            const response = await client.request(CREATE_USAGE_RECORD_MUTATION, {
                variables
            });
            if (response.data?.appUsageRecordCreate?.userErrors.length) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                    message: 'Error while creating a usage record',
                    errorData: response.data?.appUsageRecordCreate?.userErrors
                });
            }
            return response.data?.appUsageRecordCreate?.appUsageRecord;
        } catch (error) {
            if (error instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["GraphqlQueryError"]) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                    message: error.message,
                    errorData: error.response?.errors
                });
            } else {
                throw error;
            }
        }
    };
}
async function getUsageRecordSubscriptionLineItemId({ client, isTest }) {
    const payments = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$check$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["assessPayments"])({
        client,
        isTest
    });
    if (!payments.hasActivePayment) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
            message: 'No active payment found',
            errorData: []
        });
    }
    if (!payments.appSubscriptions.length) {
        throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
            message: 'No active subscriptions found',
            errorData: []
        });
    }
    if (payments.appSubscriptions) {
        const usageSubscriptionLineItemId = getUsageLineItemId(payments.appSubscriptions);
        return usageSubscriptionLineItemId;
    }
    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
        message: 'Unable to find active subscription line item',
        errorData: []
    });
}
function getUsageLineItemId(subscriptions) {
    for (const subscription of subscriptions){
        // An app can have only one active subscription
        if (subscription.status === 'ACTIVE' && subscription.lineItems) {
            // An app can have only one usage subscription line item
            for (const lineItem of subscription.lineItems){
                if ('balanceUsed' in lineItem.plan.pricingDetails) {
                    return lineItem.id;
                }
            }
        }
    }
    throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
        message: 'No active usage subscription found',
        errorData: []
    });
}
;
 //# sourceMappingURL=create-usage-record.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/update-usage-subscription-capped-amount.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "updateUsageCappedAmount": (()=>updateUsageCappedAmount)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$admin$2d$api$2d$client$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/admin-api-client/dist/index.mjs [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
const UPDATE_USAGE_CAPPED_AMOUNT_MUTATION = `
mutation appSubscriptionLineItemUpdate($cappedAmount: MoneyInput!, $id: ID!) {
  appSubscriptionLineItemUpdate(cappedAmount: $cappedAmount, id: $id) {
    userErrors {
      field
      message
    }
    confirmationUrl
    appSubscription {
      id
      name
      test
      lineItems {
        id
        plan {
          pricingDetails {
            ... on AppUsagePricing {
              balanceUsed {
                amount
                currencyCode
              }
              cappedAmount {
                amount
                currencyCode
              }
              terms
            }
          }
        }
      }
    }
  }
}
`;
function updateUsageCappedAmount(config) {
    return async function updateUsageCappedAmount(params) {
        if (!config.billing) {
            throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                message: 'Attempted to update line item without billing configs',
                errorData: []
            });
        }
        const { session, subscriptionLineItemId, cappedAmount: { amount, currencyCode } } = params;
        const GraphqlClient = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["graphqlClientClass"])({
            config
        });
        const client = new GraphqlClient({
            session
        });
        try {
            const response = await client.request(UPDATE_USAGE_CAPPED_AMOUNT_MUTATION, {
                variables: {
                    id: subscriptionLineItemId,
                    cappedAmount: {
                        amount,
                        currencyCode
                    }
                }
            });
            if (response.data?.appSubscriptionLineItemUpdate?.userErrors.length) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                    message: 'Error while updating usage subscription capped amount',
                    errorData: response.data?.appSubscriptionLineItemUpdate?.userErrors
                });
            }
            return {
                confirmationUrl: response.data?.appSubscriptionLineItemUpdate?.confirmationUrl,
                appSubscription: response.data?.appSubscriptionLineItemUpdate?.appSubscription
            };
        } catch (error) {
            if (error instanceof __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["GraphqlQueryError"]) {
                throw new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["BillingError"]({
                    message: error.message,
                    errorData: error.response?.errors
                });
            }
            throw error;
        }
    };
}
;
 //# sourceMappingURL=update-usage-subscription-capped-amount.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "shopifyBilling": (()=>shopifyBilling)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$check$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/check.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$request$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/request.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$cancel$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/cancel.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$subscriptions$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/subscriptions.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$create$2d$usage$2d$record$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/create-usage-record.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$update$2d$usage$2d$subscription$2d$capped$2d$amount$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/update-usage-subscription-capped-amount.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
function shopifyBilling(config) {
    return {
        check: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$check$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["check"])(config),
        request: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$request$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["request"])(config),
        cancel: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$cancel$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["cancel"])(config),
        subscriptions: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$subscriptions$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["subscriptions"])(config),
        createUsageRecord: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$create$2d$usage$2d$record$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createUsageRecord"])(config),
        updateUsageCappedAmount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$update$2d$usage$2d$subscription$2d$capped$2d$amount$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateUsageCappedAmount"])(config)
    };
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/flow/validate.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "validateFactory": (()=>validateFactory)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$hmac$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/hmac-validator.mjs [app-route] (ecmascript)");
;
;
function validateFactory(config) {
    return async function validate({ rawBody, ...adapterArgs }) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$hmac$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateHmacFromRequestFactory"])(config)({
            type: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HmacValidationType"].Flow,
            rawBody,
            ...adapterArgs
        });
    };
}
;
 //# sourceMappingURL=validate.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/flow/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "shopifyFlow": (()=>shopifyFlow)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$flow$2f$validate$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/flow/validate.mjs [app-route] (ecmascript)");
;
function shopifyFlow(config) {
    return {
        validate: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$flow$2f$validate$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateFactory"])(config)
    };
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/fulfillment-service/validate.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "validateFactory": (()=>validateFactory)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$hmac$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/hmac-validator.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/types.mjs [app-route] (ecmascript)");
;
;
function validateFactory(config) {
    return async function validate({ rawBody, ...adapterArgs }) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$hmac$2d$validator$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateHmacFromRequestFactory"])(config)({
            type: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["HmacValidationType"].FulfillmentService,
            rawBody,
            ...adapterArgs
        });
    };
}
;
 //# sourceMappingURL=validate.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/fulfillment-service/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "fulfillmentService": (()=>fulfillmentService)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$fulfillment$2d$service$2f$validate$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/fulfillment-service/validate.mjs [app-route] (ecmascript)");
;
function fulfillmentService(config) {
    return {
        validate: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$fulfillment$2d$service$2f$validate$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateFactory"])(config)
    };
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/index.mjs [app-route] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "shopifyApi": (()=>shopifyApi)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$config$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/config.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$flow$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/flow/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$fulfillment$2d$service$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/fulfillment-service/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$rest$2f$load$2d$rest$2d$resources$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/rest/load-rest-resources.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$rest$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/rest/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$version$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/version.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$platform$2f$runtime$2d$string$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/platform/runtime-string.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$future$2f$flags$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/future/flags.mjs [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
function shopifyApi({ future, restResources, ...config }) {
    const libConfig = {
        ...config,
        future,
        restResources
    };
    const validatedConfig = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$config$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateConfig"])(libConfig);
    const shopify = {
        config: validatedConfig,
        clients: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["clientClasses"])(validatedConfig),
        auth: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["shopifyAuth"])(validatedConfig),
        session: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["shopifySession"])(validatedConfig),
        utils: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["shopifyUtils"])(validatedConfig),
        webhooks: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["shopifyWebhooks"])(validatedConfig),
        billing: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["shopifyBilling"])(validatedConfig),
        flow: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$flow$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["shopifyFlow"])(validatedConfig),
        fulfillmentService: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$fulfillment$2d$service$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fulfillmentService"])(validatedConfig),
        logger: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logger"])(validatedConfig),
        rest: {}
    };
    if (restResources) {
        shopify.rest = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$rest$2f$load$2d$rest$2d$resources$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["loadRestResources"])({
            resources: restResources,
            config: validatedConfig,
            RestClient: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$rest$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["restClientClass"])({
                config: validatedConfig
            })
        });
    }
    shopify.logger.info(`version ${__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$version$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SHOPIFY_API_LIBRARY_VERSION"]}, environment ${(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$platform$2f$runtime$2d$string$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["abstractRuntimeString"])()}`).catch((err)=>console.log(err));
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$future$2f$flags$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["logDisabledFutureFlags"])(validatedConfig, shopify.logger);
    return shopify;
}
;
 //# sourceMappingURL=index.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/lib/index.mjs [app-route] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, t: __turbopack_require_real__ } = __turbopack_context__;
{
__turbopack_esm__({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$rest$2f$load$2d$rest$2d$resources$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/rest/load-rest-resources.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$platform$2f$runtime$2d$string$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/platform/runtime-string.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$future$2f$flags$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/future/flags.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$config$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/config.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$billing$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/billing/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$logger$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/logger/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$version$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/version.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$rest$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/rest/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$flow$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/flow/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$fulfillment$2d$service$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/fulfillment-service/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$error$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/error.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$session$2f$session$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/session/session.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$scopes$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/scopes/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$auth$2f$oauth$2f$token$2d$exchange$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/auth/oauth/token-exchange.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$webhooks$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/webhooks/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$utils$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/utils/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$clients$2f$admin$2f$graphql$2f$client$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/clients/admin/graphql/client.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/lib/index.mjs [app-route] (ecmascript) <locals>");
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/adapters/web-api/adapter.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({
    "webApiConvertHeaders": (()=>webApiConvertHeaders),
    "webApiConvertRequest": (()=>webApiConvertRequest),
    "webApiConvertResponse": (()=>webApiConvertResponse),
    "webApiRuntimeString": (()=>webApiRuntimeString)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/headers.mjs [app-route] (ecmascript)");
;
;
;
async function webApiConvertRequest(adapterArgs) {
    const request = adapterArgs.rawRequest;
    const headers = {};
    for (const [key, value] of request.headers.entries()){
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addHeader"])(headers, key, value);
    }
    return {
        headers,
        method: request.method ?? 'GET',
        url: new URL(request.url).toString()
    };
}
async function webApiConvertHeaders(headers, _adapterArgs) {
    const remixHeaders = new Headers();
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$headers$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["flatHeaders"])(headers ?? {}).forEach(([key, value])=>remixHeaders.append(key, value));
    return Promise.resolve(remixHeaders);
}
async function webApiConvertResponse(resp, adapterArgs) {
    return new Response(resp.body, {
        status: resp.statusCode,
        statusText: resp.statusText,
        headers: await webApiConvertHeaders(resp.headers ?? {})
    });
}
function webApiRuntimeString() {
    return 'Web API';
}
;
 //# sourceMappingURL=adapter.mjs.map
}}),
"[project]/node_modules/@shopify/shopify-api/dist/esm/adapters/web-api/index.mjs [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
__turbopack_esm__({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/http/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$types$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/types.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$crypto$2f$crypto$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/crypto/crypto.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$platform$2f$runtime$2d$string$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/runtime/platform/runtime-string.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$adapters$2f$web$2d$api$2f$adapter$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@shopify/shopify-api/dist/esm/adapters/web-api/adapter.mjs [app-route] (ecmascript)");
;
;
;
;
;
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setAbstractFetchFunc"])(fetch);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setAbstractConvertRequestFunc"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$adapters$2f$web$2d$api$2f$adapter$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["webApiConvertRequest"]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setAbstractConvertResponseFunc"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$adapters$2f$web$2d$api$2f$adapter$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["webApiConvertResponse"]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$http$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setAbstractConvertHeadersFunc"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$adapters$2f$web$2d$api$2f$adapter$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["webApiConvertHeaders"]);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$runtime$2f$platform$2f$runtime$2d$string$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["setAbstractRuntimeString"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$shopify$2f$shopify$2d$api$2f$dist$2f$esm$2f$adapters$2f$web$2d$api$2f$adapter$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["webApiRuntimeString"]); //# sourceMappingURL=index.mjs.map
}}),

};

//# sourceMappingURL=node_modules_%40shopify_shopify-api_dist_esm_08164c._.js.map